{"remainingRequest":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/-Second-hand-mall/src/components/common/ReportForm.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Desktop/-Second-hand-mall/src/components/common/ReportForm.vue","mtime":1742022321891},{"path":"/Users/macos/Desktop/-Second-hand-mall/babel.config.js","mtime":1741743639580},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js","mtime":1741743640250},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js","mtime":1741743643788}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nexport default {\n  name: 'ReportForm',\n  props: {\n    reportedUserId: {\n      type: Number,\n      required: true\n    },\n    reportedItemId: {\n      type: Number,\n      default: null\n    }\n  },\n  data: function data() {\n    return {\n      reportForm: {\n        reportType: 1,\n        reportReason: '',\n        evidenceUrls: '',\n        reportedUserId: this.reportedUserId,\n        reportedItemId: this.reportedItemId\n      },\n      evidenceList: [],\n      submitting: false,\n      rules: {\n        reportType: [{\n          required: true,\n          message: '请选择举报类型',\n          trigger: 'change'\n        }],\n        reportReason: [{\n          required: true,\n          message: '请输入举报理由',\n          trigger: 'blur'\n        }, {\n          min: 10,\n          max: 500,\n          message: '举报理由长度应在10到500个字符之间',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    handleUploadSuccess: function handleUploadSuccess(response, file, fileList) {\n      if (response.status_code === 1) {\n        this.evidenceList.push(response.data);\n        this.reportForm.evidenceUrls = this.evidenceList.join(',');\n      } else {\n        this.$message.error('图片上传失败');\n      }\n    },\n    handleUploadRemove: function handleUploadRemove(file, fileList) {\n      var index = this.evidenceList.indexOf(file.response.data);\n      if (index !== -1) {\n        this.evidenceList.splice(index, 1);\n        this.reportForm.evidenceUrls = this.evidenceList.join(',');\n      }\n    },\n    beforeUpload: function beforeUpload(file) {\n      var isJPGOrPNG = file.type === 'image/jpeg' || file.type === 'image/png';\n      var isLt5M = file.size / 1024 / 1024 < 5;\n      if (!isJPGOrPNG) {\n        this.$message.error('只能上传JPG或PNG格式的图片!');\n      }\n      if (!isLt5M) {\n        this.$message.error('图片大小不能超过5MB!');\n      }\n      return isJPGOrPNG && isLt5M;\n    },\n    submitReport: function submitReport() {\n      var _this = this;\n      this.$refs.reportForm.validate(function (valid) {\n        if (valid) {\n          _this.submitting = true;\n          _this.$api.createReport(_this.reportForm).then(function (res) {\n            _this.submitting = false;\n            if (res.status_code === 1) {\n              _this.$message.success('举报提交成功');\n              _this.$emit('report-submitted');\n              _this.resetForm();\n            } else {\n              _this.$message.error(res.msg || '提交失败，请稍后重试');\n            }\n          }).catch(function () {\n            _this.submitting = false;\n            _this.$message.error('网络错误，请稍后重试');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm() {\n      this.$refs.reportForm.resetFields();\n      this.evidenceList = [];\n      this.reportForm.evidenceUrls = '';\n      this.$emit('cancel');\n    }\n  }\n};",{"version":3,"names":["name","props","reportedUserId","type","Number","required","reportedItemId","default","data","reportForm","reportType","reportReason","evidenceUrls","evidenceList","submitting","rules","message","trigger","min","max","methods","handleUploadSuccess","response","file","fileList","status_code","push","join","$message","error","handleUploadRemove","index","indexOf","splice","beforeUpload","isJPGOrPNG","isLt5M","size","submitReport","_this","$refs","validate","valid","$api","createReport","then","res","success","$emit","resetForm","msg","catch","resetFields"],"sources":["src/components/common/ReportForm.vue"],"sourcesContent":["<template>\n  <div class=\"report-form\">\n    <el-form :model=\"reportForm\" :rules=\"rules\" ref=\"reportForm\" label-width=\"100px\">\n      <el-form-item label=\"举报类型\" prop=\"reportType\">\n        <el-radio-group v-model=\"reportForm.reportType\">\n          <el-radio :label=\"1\">虚假信息</el-radio>\n          <el-radio :label=\"2\">违禁物品</el-radio>\n          <el-radio :label=\"3\">欺诈行为</el-radio>\n          <el-radio :label=\"4\">其他</el-radio>\n        </el-radio-group>\n      </el-form-item>\n      \n      <el-form-item label=\"举报理由\" prop=\"reportReason\">\n        <el-input\n          type=\"textarea\"\n          :rows=\"4\"\n          placeholder=\"请详细描述您举报的理由，例如具体的虚假信息、违规内容等\"\n          v-model=\"reportForm.reportReason\">\n        </el-input>\n      </el-form-item>\n      \n      <el-form-item label=\"举证材料\">\n        <el-upload\n          action=\"http://localhost:8082/file\"\n          list-type=\"picture-card\"\n          :on-success=\"handleUploadSuccess\"\n          :on-remove=\"handleUploadRemove\"\n          :before-upload=\"beforeUpload\"\n          multiple>\n          <i class=\"el-icon-plus\"></i>\n          <div slot=\"tip\" class=\"el-upload__tip\">支持上传jpg/png图片，不超过5MB</div>\n        </el-upload>\n      </el-form-item>\n    </el-form>\n    \n    <div class=\"form-actions\">\n      <el-button @click=\"resetForm\">取消</el-button>\n      <el-button type=\"primary\" @click=\"submitReport\" :loading=\"submitting\">提交举报</el-button>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'ReportForm',\n  props: {\n    reportedUserId: {\n      type: Number,\n      required: true\n    },\n    reportedItemId: {\n      type: Number,\n      default: null\n    }\n  },\n  data() {\n    return {\n      reportForm: {\n        reportType: 1,\n        reportReason: '',\n        evidenceUrls: '',\n        reportedUserId: this.reportedUserId,\n        reportedItemId: this.reportedItemId\n      },\n      evidenceList: [],\n      submitting: false,\n      rules: {\n        reportType: [\n          { required: true, message: '请选择举报类型', trigger: 'change' }\n        ],\n        reportReason: [\n          { required: true, message: '请输入举报理由', trigger: 'blur' },\n          { min: 10, max: 500, message: '举报理由长度应在10到500个字符之间', trigger: 'blur' }\n        ]\n      }\n    };\n  },\n  methods: {\n    handleUploadSuccess(response, file, fileList) {\n      if (response.status_code === 1) {\n        this.evidenceList.push(response.data);\n        this.reportForm.evidenceUrls = this.evidenceList.join(',');\n      } else {\n        this.$message.error('图片上传失败');\n      }\n    },\n    handleUploadRemove(file, fileList) {\n      const index = this.evidenceList.indexOf(file.response.data);\n      if (index !== -1) {\n        this.evidenceList.splice(index, 1);\n        this.reportForm.evidenceUrls = this.evidenceList.join(',');\n      }\n    },\n    beforeUpload(file) {\n      const isJPGOrPNG = file.type === 'image/jpeg' || file.type === 'image/png';\n      const isLt5M = file.size / 1024 / 1024 < 5;\n\n      if (!isJPGOrPNG) {\n        this.$message.error('只能上传JPG或PNG格式的图片!');\n      }\n      if (!isLt5M) {\n        this.$message.error('图片大小不能超过5MB!');\n      }\n      return isJPGOrPNG && isLt5M;\n    },\n    submitReport() {\n      this.$refs.reportForm.validate((valid) => {\n        if (valid) {\n          this.submitting = true;\n          this.$api.createReport(this.reportForm).then(res => {\n            this.submitting = false;\n            if (res.status_code === 1) {\n              this.$message.success('举报提交成功');\n              this.$emit('report-submitted');\n              this.resetForm();\n            } else {\n              this.$message.error(res.msg || '提交失败，请稍后重试');\n            }\n          }).catch(() => {\n            this.submitting = false;\n            this.$message.error('网络错误，请稍后重试');\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm() {\n      this.$refs.reportForm.resetFields();\n      this.evidenceList = [];\n      this.reportForm.evidenceUrls = '';\n      this.$emit('cancel');\n    }\n  }\n};\n</script>\n\n<style scoped>\n.report-form {\n  padding: 20px;\n}\n.form-actions {\n  margin-top: 20px;\n  text-align: right;\n}\n.el-upload__tip {\n  line-height: 1.2;\n  font-size: 12px;\n  color: #606266;\n}\n</style> "],"mappings":";AA2CA;EACAA,IAAA;EACAC,KAAA;IACAC,cAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,cAAA;MACAH,IAAA,EAAAC,MAAA;MACAG,OAAA;IACA;EACA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,UAAA;QACAC,UAAA;QACAC,YAAA;QACAC,YAAA;QACAV,cAAA,OAAAA,cAAA;QACAI,cAAA,OAAAA;MACA;MACAO,YAAA;MACAC,UAAA;MACAC,KAAA;QACAL,UAAA,GACA;UAAAL,QAAA;UAAAW,OAAA;UAAAC,OAAA;QAAA,EACA;QACAN,YAAA,GACA;UAAAN,QAAA;UAAAW,OAAA;UAAAC,OAAA;QAAA,GACA;UAAAC,GAAA;UAAAC,GAAA;UAAAH,OAAA;UAAAC,OAAA;QAAA;MAEA;IACA;EACA;EACAG,OAAA;IACAC,mBAAA,WAAAA,oBAAAC,QAAA,EAAAC,IAAA,EAAAC,QAAA;MACA,IAAAF,QAAA,CAAAG,WAAA;QACA,KAAAZ,YAAA,CAAAa,IAAA,CAAAJ,QAAA,CAAAd,IAAA;QACA,KAAAC,UAAA,CAAAG,YAAA,QAAAC,YAAA,CAAAc,IAAA;MACA;QACA,KAAAC,QAAA,CAAAC,KAAA;MACA;IACA;IACAC,kBAAA,WAAAA,mBAAAP,IAAA,EAAAC,QAAA;MACA,IAAAO,KAAA,QAAAlB,YAAA,CAAAmB,OAAA,CAAAT,IAAA,CAAAD,QAAA,CAAAd,IAAA;MACA,IAAAuB,KAAA;QACA,KAAAlB,YAAA,CAAAoB,MAAA,CAAAF,KAAA;QACA,KAAAtB,UAAA,CAAAG,YAAA,QAAAC,YAAA,CAAAc,IAAA;MACA;IACA;IACAO,YAAA,WAAAA,aAAAX,IAAA;MACA,IAAAY,UAAA,GAAAZ,IAAA,CAAApB,IAAA,qBAAAoB,IAAA,CAAApB,IAAA;MACA,IAAAiC,MAAA,GAAAb,IAAA,CAAAc,IAAA;MAEA,KAAAF,UAAA;QACA,KAAAP,QAAA,CAAAC,KAAA;MACA;MACA,KAAAO,MAAA;QACA,KAAAR,QAAA,CAAAC,KAAA;MACA;MACA,OAAAM,UAAA,IAAAC,MAAA;IACA;IACAE,YAAA,WAAAA,aAAA;MAAA,IAAAC,KAAA;MACA,KAAAC,KAAA,CAAA/B,UAAA,CAAAgC,QAAA,WAAAC,KAAA;QACA,IAAAA,KAAA;UACAH,KAAA,CAAAzB,UAAA;UACAyB,KAAA,CAAAI,IAAA,CAAAC,YAAA,CAAAL,KAAA,CAAA9B,UAAA,EAAAoC,IAAA,WAAAC,GAAA;YACAP,KAAA,CAAAzB,UAAA;YACA,IAAAgC,GAAA,CAAArB,WAAA;cACAc,KAAA,CAAAX,QAAA,CAAAmB,OAAA;cACAR,KAAA,CAAAS,KAAA;cACAT,KAAA,CAAAU,SAAA;YACA;cACAV,KAAA,CAAAX,QAAA,CAAAC,KAAA,CAAAiB,GAAA,CAAAI,GAAA;YACA;UACA,GAAAC,KAAA;YACAZ,KAAA,CAAAzB,UAAA;YACAyB,KAAA,CAAAX,QAAA,CAAAC,KAAA;UACA;QACA;UACA;QACA;MACA;IACA;IACAoB,SAAA,WAAAA,UAAA;MACA,KAAAT,KAAA,CAAA/B,UAAA,CAAA2C,WAAA;MACA,KAAAvC,YAAA;MACA,KAAAJ,UAAA,CAAAG,YAAA;MACA,KAAAoC,KAAA;IACA;EACA;AACA","ignoreList":[]}]}