{"remainingRequest":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/-Second-hand-mall/src/components/page/exchange/my-requests.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Desktop/-Second-hand-mall/src/components/page/exchange/my-requests.vue","mtime":1741936861179},{"path":"/Users/macos/Desktop/-Second-hand-mall/babel.config.js","mtime":1741743639580},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js","mtime":1741743640250},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js","mtime":1741743643788}],"contextDependencies":[],"result":["import \"core-js/modules/es7.string.pad-start\";\nimport \"core-js/modules/es6.regexp.split\";\nimport api from '@/api/index';\nexport default {\n  name: 'my-requests',\n  data: function data() {\n    return {\n      requests: [],\n      loading: false\n    };\n  },\n  mounted: function mounted() {\n    this.loadRequests();\n  },\n  methods: {\n    loadRequests: function loadRequests() {\n      var _this = this;\n      this.loading = true;\n      api.getMyExchangeRequests().then(function (res) {\n        if (res.status_code === 1 && res.data) {\n          _this.requests = res.data;\n        } else {\n          _this.$message.error(res.msg || '获取交换请求失败');\n        }\n      }).catch(function (err) {\n        console.error('获取交换请求失败', err);\n        _this.$message.error('获取交换请求失败');\n      }).finally(function () {\n        _this.loading = false;\n      });\n    },\n    getFirstImage: function getFirstImage(pictureList) {\n      if (!pictureList) return require('@/assets/img/default.png');\n      var images = pictureList.split(',');\n      return images[0] || require('@/assets/img/default.png');\n    },\n    formatDate: function formatDate(dateStr) {\n      if (!dateStr) return '';\n      var date = new Date(dateStr);\n      return \"\".concat(date.getFullYear(), \"-\").concat(String(date.getMonth() + 1).padStart(2, '0'), \"-\").concat(String(date.getDate()).padStart(2, '0'), \" \").concat(String(date.getHours()).padStart(2, '0'), \":\").concat(String(date.getMinutes()).padStart(2, '0'));\n    },\n    getStatusType: function getStatusType(status) {\n      switch (status) {\n        case 0:\n          return 'info';\n        // 待审核\n        case 1:\n          return 'success';\n        // 已接受\n        case 2:\n          return 'danger';\n        // 已拒绝\n        case 3:\n          return '';\n        // 已完成\n        default:\n          return 'info';\n      }\n    },\n    viewDetail: function viewDetail(row) {\n      this.$router.push({\n        path: '/exchange/detail',\n        query: {\n          id: row.id\n        }\n      });\n    },\n    completeExchange: function completeExchange(row) {\n      var _this2 = this;\n      this.$confirm('确认已完成物品交换吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.loading = true;\n        api.completeExchange(row.id).then(function (res) {\n          if (res.status_code === 1) {\n            _this2.$message.success('交换已完成');\n            _this2.loadRequests();\n          } else {\n            _this2.$message.error(res.msg || '操作失败');\n          }\n        }).catch(function (err) {\n          console.error('操作失败', err);\n          _this2.$message.error('操作失败');\n        }).finally(function () {\n          _this2.loading = false;\n        });\n      }).catch(function () {});\n    },\n    goBack: function goBack() {\n      this.$router.push('/exchange');\n    }\n  }\n};",{"version":3,"names":["api","name","data","requests","loading","mounted","loadRequests","methods","_this","getMyExchangeRequests","then","res","status_code","$message","error","msg","catch","err","console","finally","getFirstImage","pictureList","require","images","split","formatDate","dateStr","date","Date","concat","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes","getStatusType","status","viewDetail","row","$router","push","path","query","id","completeExchange","_this2","$confirm","confirmButtonText","cancelButtonText","type","success","goBack"],"sources":["src/components/page/exchange/my-requests.vue"],"sourcesContent":["<template>\n  <div class=\"my-requests-container\">\n    <el-card class=\"box-card\">\n      <div slot=\"header\" class=\"clearfix\">\n        <span class=\"title\">我发起的交换请求</span>\n        <el-button style=\"float: right; padding: 3px 0\" type=\"text\" @click=\"goBack\">返回</el-button>\n      </div>\n      \n      <el-table\n        v-loading=\"loading\"\n        :data=\"requests\"\n        style=\"width: 100%\"\n        empty-text=\"暂无交换请求\">\n        <el-table-column\n          label=\"请求物品\"\n          width=\"250\">\n          <template slot-scope=\"scope\">\n            <div class=\"item-info\">\n              <img :src=\"getFirstImage(scope.row.requestItem.pictureList)\" class=\"item-img\">\n              <div>\n                <div class=\"item-name\">{{ scope.row.requestItem.idleName }}</div>\n                <div class=\"item-price\">¥{{ scope.row.requestItem.idlePrice }}</div>\n              </div>\n            </div>\n          </template>\n        </el-table-column>\n        \n        <el-table-column\n          label=\"提供物品\"\n          width=\"250\">\n          <template slot-scope=\"scope\">\n            <div class=\"item-info\">\n              <img :src=\"getFirstImage(scope.row.offerItem.pictureList)\" class=\"item-img\">\n              <div>\n                <div class=\"item-name\">{{ scope.row.offerItem.idleName }}</div>\n                <div class=\"item-price\">¥{{ scope.row.offerItem.idlePrice }}</div>\n              </div>\n            </div>\n          </template>\n        </el-table-column>\n        \n        <el-table-column\n          label=\"物品所有者\"\n          width=\"150\">\n          <template slot-scope=\"scope\">\n            <div class=\"user-info\">\n              <img :src=\"scope.row.itemOwner.userAvatar || require('@/assets/img/avatar.png')\" class=\"user-avatar\">\n              <span>{{ scope.row.itemOwner.nickname }}</span>\n            </div>\n          </template>\n        </el-table-column>\n        \n        <el-table-column\n          prop=\"statusDesc\"\n          label=\"状态\"\n          width=\"100\">\n          <template slot-scope=\"scope\">\n            <el-tag :type=\"getStatusType(scope.row.status)\">{{ scope.row.statusDesc }}</el-tag>\n          </template>\n        </el-table-column>\n        \n        <el-table-column\n          prop=\"createTime\"\n          label=\"创建时间\"\n          width=\"180\">\n          <template slot-scope=\"scope\">\n            {{ formatDate(scope.row.createTime) }}\n          </template>\n        </el-table-column>\n        \n        <el-table-column\n          label=\"操作\">\n          <template slot-scope=\"scope\">\n            <el-button\n              size=\"mini\"\n              @click=\"viewDetail(scope.row)\">查看详情</el-button>\n            <el-button\n              size=\"mini\"\n              type=\"success\"\n              v-if=\"scope.row.status === 1\"\n              @click=\"completeExchange(scope.row)\">完成交换</el-button>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport api from '@/api/index';\n\nexport default {\n  name: 'my-requests',\n  data() {\n    return {\n      requests: [],\n      loading: false\n    }\n  },\n  mounted() {\n    this.loadRequests();\n  },\n  methods: {\n    loadRequests() {\n      this.loading = true;\n      api.getMyExchangeRequests().then(res => {\n        if (res.status_code === 1 && res.data) {\n          this.requests = res.data;\n        } else {\n          this.$message.error(res.msg || '获取交换请求失败');\n        }\n      }).catch(err => {\n        console.error('获取交换请求失败', err);\n        this.$message.error('获取交换请求失败');\n      }).finally(() => {\n        this.loading = false;\n      });\n    },\n    getFirstImage(pictureList) {\n      if (!pictureList) return require('@/assets/img/default.png');\n      const images = pictureList.split(',');\n      return images[0] || require('@/assets/img/default.png');\n    },\n    formatDate(dateStr) {\n      if (!dateStr) return '';\n      const date = new Date(dateStr);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n    },\n    getStatusType(status) {\n      switch (status) {\n        case 0: return 'info';    // 待审核\n        case 1: return 'success'; // 已接受\n        case 2: return 'danger';  // 已拒绝\n        case 3: return '';        // 已完成\n        default: return 'info';\n      }\n    },\n    viewDetail(row) {\n      this.$router.push({\n        path: '/exchange/detail',\n        query: { id: row.id }\n      });\n    },\n    completeExchange(row) {\n      this.$confirm('确认已完成物品交换吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.loading = true;\n        api.completeExchange(row.id).then(res => {\n          if (res.status_code === 1) {\n            this.$message.success('交换已完成');\n            this.loadRequests();\n          } else {\n            this.$message.error(res.msg || '操作失败');\n          }\n        }).catch(err => {\n          console.error('操作失败', err);\n          this.$message.error('操作失败');\n        }).finally(() => {\n          this.loading = false;\n        });\n      }).catch(() => {});\n    },\n    goBack() {\n      this.$router.push('/exchange');\n    }\n  }\n}\n</script>\n\n<style scoped>\n.my-requests-container {\n  padding: 20px;\n}\n.title {\n  font-size: 22px;\n  font-weight: bold;\n  color: #409EFF;\n}\n.item-info {\n  display: flex;\n  align-items: center;\n}\n.item-img {\n  width: 50px;\n  height: 50px;\n  object-fit: cover;\n  margin-right: 10px;\n  border-radius: 4px;\n}\n.item-name {\n  font-size: 14px;\n  color: #303133;\n  margin-bottom: 5px;\n}\n.item-price {\n  font-size: 12px;\n  color: #F56C6C;\n}\n.user-info {\n  display: flex;\n  align-items: center;\n}\n.user-avatar {\n  width: 30px;\n  height: 30px;\n  border-radius: 50%;\n  margin-right: 10px;\n}\n</style> "],"mappings":";;AAyFA,OAAAA,GAAA;AAEA;EACAC,IAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,OAAA;IACAD,YAAA,WAAAA,aAAA;MAAA,IAAAE,KAAA;MACA,KAAAJ,OAAA;MACAJ,GAAA,CAAAS,qBAAA,GAAAC,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,WAAA,UAAAD,GAAA,CAAAT,IAAA;UACAM,KAAA,CAAAL,QAAA,GAAAQ,GAAA,CAAAT,IAAA;QACA;UACAM,KAAA,CAAAK,QAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;MACA,GAAAC,KAAA,WAAAC,GAAA;QACAC,OAAA,CAAAJ,KAAA,aAAAG,GAAA;QACAT,KAAA,CAAAK,QAAA,CAAAC,KAAA;MACA,GAAAK,OAAA;QACAX,KAAA,CAAAJ,OAAA;MACA;IACA;IACAgB,aAAA,WAAAA,cAAAC,WAAA;MACA,KAAAA,WAAA,SAAAC,OAAA;MACA,IAAAC,MAAA,GAAAF,WAAA,CAAAG,KAAA;MACA,OAAAD,MAAA,OAAAD,OAAA;IACA;IACAG,UAAA,WAAAA,WAAAC,OAAA;MACA,KAAAA,OAAA;MACA,IAAAC,IAAA,OAAAC,IAAA,CAAAF,OAAA;MACA,UAAAG,MAAA,CAAAF,IAAA,CAAAG,WAAA,SAAAD,MAAA,CAAAE,MAAA,CAAAJ,IAAA,CAAAK,QAAA,QAAAC,QAAA,eAAAJ,MAAA,CAAAE,MAAA,CAAAJ,IAAA,CAAAO,OAAA,IAAAD,QAAA,eAAAJ,MAAA,CAAAE,MAAA,CAAAJ,IAAA,CAAAQ,QAAA,IAAAF,QAAA,eAAAJ,MAAA,CAAAE,MAAA,CAAAJ,IAAA,CAAAS,UAAA,IAAAH,QAAA;IACA;IACAI,aAAA,WAAAA,cAAAC,MAAA;MACA,QAAAA,MAAA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;QACA;UAAA;QAAA;QACA;UAAA;MACA;IACA;IACAC,UAAA,WAAAA,WAAAC,GAAA;MACA,KAAAC,OAAA,CAAAC,IAAA;QACAC,IAAA;QACAC,KAAA;UAAAC,EAAA,EAAAL,GAAA,CAAAK;QAAA;MACA;IACA;IACAC,gBAAA,WAAAA,iBAAAN,GAAA;MAAA,IAAAO,MAAA;MACA,KAAAC,QAAA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,GAAAzC,IAAA;QACAqC,MAAA,CAAA3C,OAAA;QACAJ,GAAA,CAAA8C,gBAAA,CAAAN,GAAA,CAAAK,EAAA,EAAAnC,IAAA,WAAAC,GAAA;UACA,IAAAA,GAAA,CAAAC,WAAA;YACAmC,MAAA,CAAAlC,QAAA,CAAAuC,OAAA;YACAL,MAAA,CAAAzC,YAAA;UACA;YACAyC,MAAA,CAAAlC,QAAA,CAAAC,KAAA,CAAAH,GAAA,CAAAI,GAAA;UACA;QACA,GAAAC,KAAA,WAAAC,GAAA;UACAC,OAAA,CAAAJ,KAAA,SAAAG,GAAA;UACA8B,MAAA,CAAAlC,QAAA,CAAAC,KAAA;QACA,GAAAK,OAAA;UACA4B,MAAA,CAAA3C,OAAA;QACA;MACA,GAAAY,KAAA;IACA;IACAqC,MAAA,WAAAA,OAAA;MACA,KAAAZ,OAAA,CAAAC,IAAA;IACA;EACA;AACA","ignoreList":[]}]}