{"remainingRequest":"D:\\Desktop\\-Second-hand-mall\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\-Second-hand-mall\\src\\components\\page\\release.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\-Second-hand-mall\\src\\components\\page\\release.vue","mtime":1741159852060},{"path":"D:\\Desktop\\-Second-hand-mall\\babel.config.js","mtime":1741159852048},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\babel-loader\\lib\\index.js","mtime":1741229036772},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js","mtime":1741229036465}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nimport options from \"../common/country-data.js\";\nimport _upload from 'element-ui/packages/upload';\nexport default {\n  name: \"release\",\n  computed: {\n    upload: function upload() {\n      return _upload;\n    }\n  },\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      imgDialogVisible: false,\n      dialogImageUrl: '',\n      showFileList: true,\n      options: options,\n      selectedOptions: [],\n      options2: [{\n        value: 1,\n        label: '数码科技'\n      }, {\n        value: 2,\n        label: '生活用品'\n      }, {\n        value: 3,\n        label: '运动相关'\n      }, {\n        value: 4,\n        label: '图书笔记'\n      }, {\n        value: 5,\n        label: '社区帖子'\n      }],\n      imgList: [],\n      idleItemInfo: {\n        idleName: '',\n        idleDetails: '',\n        pictureList: '',\n        idlePrice: 0,\n        idlePlace: '',\n        idleLabel: ''\n      }\n    };\n  },\n  methods: {\n    handleChange: function handleChange(value) {\n      console.log(value);\n      this.idleItemInfo.idlePlace = value[1];\n    },\n    imgChange: function imgChange(file, fileList) {\n      this.noneBtnImg = fileList.length >= this.limitCountImg;\n    },\n    fileHandleRemove: function fileHandleRemove(file, fileList) {\n      console.log(file, fileList);\n      for (var i = 0; i < this.imgList.length; i++) {\n        if (this.imgList[i] === file.response.data) {\n          this.imgList.splice(i, 1);\n        }\n      }\n    },\n    fileHandlePreview: function fileHandlePreview(file) {\n      console.log(file);\n      this.dialogImageUrl = file.response.data;\n      this.imgDialogVisible = true;\n    },\n    fileHandleSuccess: function fileHandleSuccess(response, file, fileList) {\n      console.log(\"file:\", response, file, fileList);\n      this.imgList.push(response.data);\n    },\n    releaseButton: function releaseButton() {\n      var _this = this;\n      this.idleItemInfo.pictureList = JSON.stringify(this.imgList);\n      console.log(this.idleItemInfo);\n      if (this.idleItemInfo.idleName && this.idleItemInfo.idleDetails && this.idleItemInfo.idlePlace && this.idleItemInfo.idleLabel && (this.idleItemInfo.idlePrice || this.idleItemInfo.idleLabel === 5)) {\n        this.$api.addIdleItem(this.idleItemInfo).then(function (res) {\n          if (res.status_code === 1) {\n            _this.$message({\n              message: '发布成功！',\n              type: 'success'\n            });\n            console.log(res.data);\n            _this.$router.replace({\n              path: '/details',\n              query: {\n                id: res.data.id\n              }\n            });\n          } else {\n            _this.$message.error('发布失败！' + res.msg);\n          }\n        }).catch(function (e) {\n          _this.$message.error('请填写完整信息');\n        });\n      } else {\n        this.$message.error('请填写完整信息！');\n      }\n    },\n    handleExceed: function handleExceed(files, fileList) {\n      this.$message.warning(\"\\u9650\\u523610\\u5F20\\u56FE\\u7247\\uFF0C\\u672C\\u6B21\\u9009\\u62E9\\u4E86 \".concat(files.length, \" \\u5F20\\u56FE\\uFF0C\\u5171\\u9009\\u62E9\\u4E86 \").concat(files.length + fileList.length, \" \\u5F20\\u56FE\"));\n    },\n    isNotice: function isNotice() {}\n  }\n};",{"version":3,"names":["AppHead","AppBody","AppFoot","options","upload","name","computed","components","data","imgDialogVisible","dialogImageUrl","showFileList","selectedOptions","options2","value","label","imgList","idleItemInfo","idleName","idleDetails","pictureList","idlePrice","idlePlace","idleLabel","methods","handleChange","console","log","imgChange","file","fileList","noneBtnImg","length","limitCountImg","fileHandleRemove","i","response","splice","fileHandlePreview","fileHandleSuccess","push","releaseButton","_this","JSON","stringify","$api","addIdleItem","then","res","status_code","$message","message","type","$router","replace","path","query","id","error","msg","catch","e","handleExceed","files","warning","concat","isNotice"],"sources":["src/components/page/release.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <app-head></app-head>\r\n        <app-body>\r\n            <div class=\"release-idle-container\">\r\n                <div class=\"release-idle-container-title\">发布闲置/帖子</div>\r\n                <div class=\"release-idle-container-form\">\r\n                    <el-input placeholder=\"请输入闲置/帖子标题\" v-model=\"idleItemInfo.idleName\"\r\n                              maxlength=\"30\"\r\n                              show-word-limit>\r\n                    </el-input>\r\n                    <el-input\r\n                            class=\"release-idle-detiles-text\"\r\n                            type=\"textarea\"\r\n                            autosize\r\n                            placeholder=\"请输入闲置/帖子的详细介绍...\"\r\n                            v-model=\"idleItemInfo.idleDetails\"\r\n                            maxlength=\"1000\"\r\n                            show-word-limit>\r\n                    </el-input>\r\n                    <div class=\"release-idle-place\">\r\n                        <div class=\"release-tip\">您的位置</div>\r\n                        <el-cascader\r\n                                :options=\"options\"\r\n                                v-model=\"selectedOptions\"\r\n                                @change=\"handleChange\"\r\n                                :separator=\"' '\"\r\n                                style=\"width: 90%;\"\r\n                        >\r\n                        </el-cascader>\r\n                    </div>\r\n                    <div style=\"display: flex; justify-content: space-between;\">\r\n                        <div>\r\n                            <div class=\"release-tip\">闲置类别</div>\r\n                            <el-select  v-model=\"idleItemInfo.idleLabel\" placeholder=\"请选择类别\">\r\n                                <el-option\r\n                                        v-for=\"item in options2\"\r\n                                        :key=\"item.value\"\r\n                                        :label=\"item.label\"\r\n                                        :value=\"item.value\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                        <div v-show=\"idleItemInfo.idleLabel !== 5\" style=\"width: 300px;\">\r\n                            <el-input-number v-model=\"idleItemInfo.idlePrice\" :precision=\"2\" :step=\"10\" :max=\"10000000\">\r\n                                <div slot=\"prepend\">价格</div>\r\n                            </el-input-number>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"picture-list\">\r\n                        <el-image style=\"width: 600px;margin-bottom: 2px;\" fit=\"contain\"\r\n                                  v-for=\"(img,index) in imgList\" :key=\"index\" :src=\"img\"\r\n                                  :preview-src-list=\"imgList\"></el-image>\r\n                    </div>\r\n                    <div class=\"release-idle-container-picture\">\r\n                        <div class=\"release-idle-container-picture-title\">上传闲置照片</div>\r\n                        <el-upload\r\n                                action=\"http://localhost:8080/file/\"\r\n                                :on-preview=\"fileHandlePreview\"\r\n                                :on-remove=\"fileHandleRemove\"\r\n                                :on-success=\"fileHandleSuccess\"\r\n                                :on-change='imgChange'\r\n                                :show-file-list=\"showFileList\"\r\n                                :limit=\"10\"\r\n                                :on-exceed=\"handleExceed\"\r\n                                accept=\"image/*\"\r\n                                drag\r\n                                multiple>\r\n                            <i class=\"el-icon-upload\"></i>\r\n                            <div class=\"el-upload__text\">将图片拖到此处，或<em>点击上传</em></div>\r\n                        </el-upload>\r\n\r\n                        <el-dialog :visible.sync=\"imgDialogVisible\">\r\n                            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n                        </el-dialog>\r\n                    </div>\r\n                    <div style=\"display: flex;justify-content: center;margin-top: 30px;margin-bottom: 30px;\">\r\n                        <el-button type=\"primary\" plain @click=\"releaseButton\">确认发布</el-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <app-foot></app-foot>\r\n        </app-body>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import AppHead from '../common/AppHeader.vue';\r\n    import AppBody from '../common/AppPageBody.vue'\r\n    import AppFoot from '../common/AppFoot.vue'\r\n    import options from '../common/country-data.js'\r\n    import upload from 'element-ui/packages/upload';\r\n\r\n    export default {\r\n        name: \"release\",\r\n        computed: {\r\n            upload() {\r\n                return upload\r\n            }\r\n        },\r\n        components: {\r\n            AppHead,\r\n            AppBody,\r\n            AppFoot\r\n        },\r\n        data() {\r\n            return {\r\n                imgDialogVisible:false,\r\n                dialogImageUrl:'',\r\n                showFileList:true,\r\n                options:options,\r\n                selectedOptions:[],\r\n\r\n                options2: [{\r\n                    value: 1,\r\n                    label: '数码科技'\r\n                }, {\r\n                    value: 2,\r\n                    label: '生活用品'\r\n                }, {\r\n                    value: 3,\r\n                    label: '运动相关'\r\n                }, {\r\n                    value: 4,\r\n                    label: '图书笔记'\r\n                }, {\r\n                    value: 5,\r\n                    label: '社区帖子'\r\n                }],\r\n                imgList:[],\r\n                idleItemInfo:{\r\n                    idleName:'',\r\n                    idleDetails:'',\r\n                    pictureList:'',\r\n                    idlePrice:0,\r\n                    idlePlace:'',\r\n                    idleLabel:''\r\n                }\r\n            };\r\n        },\r\n        methods: {\r\n            handleChange(value) {\r\n                console.log(value);\r\n                this.idleItemInfo.idlePlace=value[1];\r\n            },\r\n            imgChange(file, fileList){\r\n                this.noneBtnImg = fileList.length >= this.limitCountImg;\r\n            },\r\n            fileHandleRemove(file, fileList) {\r\n                console.log(file, fileList);\r\n                for(let i=0;i<this.imgList.length;i++){\r\n                    if(this.imgList[i]===file.response.data){\r\n                        this.imgList.splice(i,1);\r\n                    }\r\n                }\r\n            },\r\n            fileHandlePreview(file) {\r\n                console.log(file);\r\n                this.dialogImageUrl=file.response.data;\r\n                this.imgDialogVisible=true;\r\n            },\r\n            fileHandleSuccess(response, file, fileList){\r\n                console.log(\"file:\",response,file,fileList);\r\n                this.imgList.push(response.data);\r\n            },\r\n            releaseButton(){\r\n                this.idleItemInfo.pictureList=JSON.stringify(this.imgList);\r\n                console.log(this.idleItemInfo);\r\n                if(this.idleItemInfo.idleName&&\r\n                    this.idleItemInfo.idleDetails&&\r\n                    this.idleItemInfo.idlePlace&&\r\n                    this.idleItemInfo.idleLabel&&\r\n                  (this.idleItemInfo.idlePrice || this.idleItemInfo.idleLabel === 5)){\r\n                    this.$api.addIdleItem(this.idleItemInfo).then(res=>{\r\n                        if (res.status_code === 1) {\r\n                            this.$message({\r\n                                message: '发布成功！',\r\n                                type: 'success'\r\n                            });\r\n                            console.log(res.data);\r\n                            this.$router.replace({path: '/details', query: {id: res.data.id}});\r\n                        } else {\r\n                            this.$message.error('发布失败！'+res.msg);\r\n                        }\r\n                    }).catch(e=>{\r\n                        this.$message.error('请填写完整信息');\r\n                    })\r\n                }else {\r\n                    this.$message.error('请填写完整信息！');\r\n                }\r\n\r\n            },\r\n            handleExceed(files, fileList) {\r\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\r\n            },\r\n            isNotice() {\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .release-idle-container {\r\n        min-height: 85vh;\r\n    }\r\n\r\n    .release-idle-container-title {\r\n        font-size: 18px;\r\n        padding: 30px 0;\r\n        font-weight: 600;\r\n        width: 100%;\r\n        text-align: center;\r\n    }\r\n\r\n    .release-idle-container-form {\r\n        padding: 0 180px;\r\n    }\r\n\r\n    .release-idle-detiles-text {\r\n        margin: 20px 0;\r\n    }\r\n    .release-idle-place{\r\n        margin-bottom: 15px;\r\n    }\r\n    .release-tip{\r\n        color: #555555;\r\n        float: left;\r\n        padding-right: 5px;\r\n        height: 36px;\r\n        line-height: 36px;\r\n        font-size: 14px;\r\n    }\r\n    .release-idle-container-picture{\r\n        margin: 20px 0;\r\n\r\n    }\r\n    .release-idle-container-picture-title{\r\n        margin: 10px 0;\r\n        color: #555555;\r\n        font-size: 14px;\r\n        display: none;\r\n    }\r\n    .picture-list {\r\n        margin: 20px 0;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .disUoloadSty .el-upload--picture-card{\r\n        display:none;   /* 上传按钮隐藏 */\r\n    }\r\n\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}