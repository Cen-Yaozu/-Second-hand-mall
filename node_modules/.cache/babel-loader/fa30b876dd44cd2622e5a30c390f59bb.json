{"remainingRequest":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/-Second-hand-mall/src/components/admin/announcement/AdminAnnouncementList.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Desktop/-Second-hand-mall/src/components/admin/announcement/AdminAnnouncementList.vue","mtime":1742200278841},{"path":"/Users/macos/Desktop/-Second-hand-mall/babel.config.js","mtime":1741743639580},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js","mtime":1741743640250},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js","mtime":1741743643788}],"contextDependencies":[],"result":["import \"core-js/modules/es7.string.pad-start\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/web.dom.iterable\";\nexport default {\n  name: 'AdminAnnouncementList',\n  data: function data() {\n    return {\n      loading: false,\n      announcementList: [],\n      total: 0,\n      queryParams: {\n        page: 1,\n        size: 10,\n        type: null,\n        status: null,\n        isImportant: null\n      }\n    };\n  },\n  created: function created() {\n    this.fetchAnnouncementList();\n  },\n  methods: {\n    fetchAnnouncementList: function fetchAnnouncementList() {\n      var _this = this;\n      this.loading = true;\n      // 构建请求参数，移除值为null的参数\n      var params = {};\n      Object.keys(this.queryParams).forEach(function (key) {\n        if (_this.queryParams[key] !== null) {\n          params[key] = _this.queryParams[key];\n        }\n      });\n      this.$api.adminGetAnnouncementList(params).then(function (res) {\n        _this.loading = false;\n        if (res.status_code === 1) {\n          _this.announcementList = res.data || [];\n          _this.total = res.total || _this.announcementList.length;\n        } else {\n          _this.$message.error('获取公告列表失败');\n        }\n      }).catch(function () {\n        _this.loading = false;\n        _this.$message.error('获取公告列表失败');\n      });\n    },\n    createAnnouncement: function createAnnouncement() {\n      this.$router.push('/admin/announcement/create');\n    },\n    viewAnnouncement: function viewAnnouncement(row) {\n      this.$router.push(\"/admin/announcement/detail/\".concat(row.id));\n    },\n    editAnnouncement: function editAnnouncement(row) {\n      this.$router.push(\"/admin/announcement/edit/\".concat(row.id));\n    },\n    publishAnnouncement: function publishAnnouncement(row) {\n      var _this2 = this;\n      this.$confirm('确认发布此公告?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(function () {\n        _this2.$api.adminPublishAnnouncement(row.id).then(function (res) {\n          if (res.status_code === 1) {\n            _this2.$message.success('公告发布成功');\n            _this2.fetchAnnouncementList();\n          } else {\n            _this2.$message.error('公告发布失败');\n          }\n        }).catch(function () {\n          _this2.$message.error('公告发布失败');\n        });\n      }).catch(function () {});\n    },\n    deleteAnnouncement: function deleteAnnouncement(row) {\n      var _this3 = this;\n      this.$confirm('确认删除此公告? 删除后无法恢复!', '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'error'\n      }).then(function () {\n        _this3.$api.adminDeleteAnnouncement(row.id).then(function (res) {\n          if (res.status_code === 1) {\n            _this3.$message.success('公告删除成功');\n            _this3.fetchAnnouncementList();\n          } else {\n            _this3.$message.error('公告删除失败');\n          }\n        }).catch(function () {\n          _this3.$message.error('公告删除失败');\n        });\n      }).catch(function () {});\n    },\n    handleSearch: function handleSearch() {\n      this.queryParams.page = 1;\n      this.fetchAnnouncementList();\n    },\n    resetQuery: function resetQuery() {\n      this.queryParams = {\n        page: 1,\n        size: 10,\n        type: null,\n        status: null,\n        isImportant: null\n      };\n      this.fetchAnnouncementList();\n    },\n    handleCurrentChange: function handleCurrentChange(page) {\n      this.queryParams.page = page;\n      this.fetchAnnouncementList();\n    },\n    getTypeName: function getTypeName(type) {\n      switch (type) {\n        case 1:\n          return '系统更新';\n        case 2:\n          return '活动通知';\n        case 3:\n          return '规则变更';\n        default:\n          return '未知类型';\n      }\n    },\n    getTypeTag: function getTypeTag(type) {\n      switch (type) {\n        case 1:\n          return 'primary';\n        case 2:\n          return 'success';\n        case 3:\n          return 'warning';\n        default:\n          return 'info';\n      }\n    },\n    getStatusName: function getStatusName(status) {\n      switch (status) {\n        case 0:\n          return '草稿';\n        case 1:\n          return '已发布';\n        case 2:\n          return '已过期';\n        default:\n          return '未知';\n      }\n    },\n    getStatusTag: function getStatusTag(status) {\n      switch (status) {\n        case 0:\n          return 'info';\n        case 1:\n          return 'success';\n        case 2:\n          return 'danger';\n        default:\n          return '';\n      }\n    },\n    formatDate: function formatDate(dateString) {\n      if (!dateString) return '';\n      var date = new Date(dateString);\n      return \"\".concat(date.getFullYear(), \"-\").concat(String(date.getMonth() + 1).padStart(2, '0'), \"-\").concat(String(date.getDate()).padStart(2, '0'), \" \").concat(String(date.getHours()).padStart(2, '0'), \":\").concat(String(date.getMinutes()).padStart(2, '0'));\n    }\n  }\n};",{"version":3,"names":["name","data","loading","announcementList","total","queryParams","page","size","type","status","isImportant","created","fetchAnnouncementList","methods","_this","params","Object","keys","forEach","key","$api","adminGetAnnouncementList","then","res","status_code","length","$message","error","catch","createAnnouncement","$router","push","viewAnnouncement","row","concat","id","editAnnouncement","publishAnnouncement","_this2","$confirm","confirmButtonText","cancelButtonText","adminPublishAnnouncement","success","deleteAnnouncement","_this3","adminDeleteAnnouncement","handleSearch","resetQuery","handleCurrentChange","getTypeName","getTypeTag","getStatusName","getStatusTag","formatDate","dateString","date","Date","getFullYear","String","getMonth","padStart","getDate","getHours","getMinutes"],"sources":["src/components/admin/announcement/AdminAnnouncementList.vue"],"sourcesContent":["<template>\n  <div class=\"admin-announcement-list\">\n    <div class=\"admin-announcement-header\">\n      <div class=\"header-title\">公告管理</div>\n      <div class=\"header-actions\">\n        <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"createAnnouncement\">新建公告</el-button>\n      </div>\n    </div>\n\n    <div class=\"filter-container\">\n      <el-select v-model=\"queryParams.type\" placeholder=\"公告类型\" clearable class=\"filter-item\">\n        <el-option label=\"全部类型\" :value=\"null\"></el-option>\n        <el-option label=\"系统更新\" :value=\"1\"></el-option>\n        <el-option label=\"活动通知\" :value=\"2\"></el-option>\n        <el-option label=\"规则变更\" :value=\"3\"></el-option>\n      </el-select>\n      \n      <el-select v-model=\"queryParams.status\" placeholder=\"公告状态\" clearable class=\"filter-item\">\n        <el-option label=\"全部状态\" :value=\"null\"></el-option>\n        <el-option label=\"草稿\" :value=\"0\"></el-option>\n        <el-option label=\"已发布\" :value=\"1\"></el-option>\n        <el-option label=\"已过期\" :value=\"2\"></el-option>\n      </el-select>\n      \n      <el-select v-model=\"queryParams.isImportant\" placeholder=\"重要程度\" clearable class=\"filter-item\">\n        <el-option label=\"全部\" :value=\"null\"></el-option>\n        <el-option label=\"重要\" :value=\"true\"></el-option>\n        <el-option label=\"普通\" :value=\"false\"></el-option>\n      </el-select>\n      \n      <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"handleSearch\">搜索</el-button>\n      <el-button icon=\"el-icon-refresh\" @click=\"resetQuery\">重置</el-button>\n    </div>\n\n    <el-table\n      v-loading=\"loading\"\n      :data=\"announcementList\"\n      style=\"width: 100%\">\n      <el-table-column\n        prop=\"title\"\n        label=\"标题\"\n        min-width=\"200\">\n        <template slot-scope=\"scope\">\n          <div class=\"announcement-title\">\n            <span v-if=\"scope.row.isImportant\" class=\"important-tag\">重要</span>\n            {{ scope.row.title }}\n          </div>\n        </template>\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"type\"\n        label=\"类型\"\n        width=\"120\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getTypeTag(scope.row.type)\">{{ getTypeName(scope.row.type) }}</el-tag>\n        </template>\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"status\"\n        label=\"状态\"\n        width=\"100\">\n        <template slot-scope=\"scope\">\n          <el-tag :type=\"getStatusTag(scope.row.status)\">{{ getStatusName(scope.row.status) }}</el-tag>\n        </template>\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"createTime\"\n        label=\"创建时间\"\n        width=\"160\">\n        <template slot-scope=\"scope\">\n          {{ formatDate(scope.row.createTime) }}\n        </template>\n      </el-table-column>\n      \n      <el-table-column\n        prop=\"publishTime\"\n        label=\"发布时间\"\n        width=\"160\">\n        <template slot-scope=\"scope\">\n          {{ formatDate(scope.row.publishTime) || '未发布' }}\n        </template>\n      </el-table-column>\n      \n      <el-table-column\n        label=\"操作\"\n        width=\"200\">\n        <template slot-scope=\"scope\">\n          <el-button size=\"mini\" type=\"text\" @click=\"viewAnnouncement(scope.row)\">查看</el-button>\n          <el-button size=\"mini\" type=\"text\" @click=\"editAnnouncement(scope.row)\">编辑</el-button>\n          <el-button \n            v-if=\"scope.row.status === 0\" \n            size=\"mini\" \n            type=\"text\" \n            @click=\"publishAnnouncement(scope.row)\">发布</el-button>\n          <el-button \n            size=\"mini\" \n            type=\"text\" \n            class=\"danger-btn\" \n            @click=\"deleteAnnouncement(scope.row)\">删除</el-button>\n        </template>\n      </el-table-column>\n    </el-table>\n\n    <div class=\"pagination-container\">\n      <el-pagination\n        @current-change=\"handleCurrentChange\"\n        :current-page.sync=\"queryParams.page\"\n        :page-size=\"queryParams.size\"\n        layout=\"total, prev, pager, next\"\n        :total=\"total\">\n      </el-pagination>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'AdminAnnouncementList',\n  data() {\n    return {\n      loading: false,\n      announcementList: [],\n      total: 0,\n      queryParams: {\n        page: 1,\n        size: 10,\n        type: null,\n        status: null,\n        isImportant: null\n      }\n    };\n  },\n  created() {\n    this.fetchAnnouncementList();\n  },\n  methods: {\n    fetchAnnouncementList() {\n      this.loading = true;\n      // 构建请求参数，移除值为null的参数\n      const params = {};\n      Object.keys(this.queryParams).forEach(key => {\n        if (this.queryParams[key] !== null) {\n          params[key] = this.queryParams[key];\n        }\n      });\n      \n      this.$api.adminGetAnnouncementList(params).then(res => {\n        this.loading = false;\n        if (res.status_code === 1) {\n          this.announcementList = res.data || [];\n          this.total = res.total || this.announcementList.length;\n        } else {\n          this.$message.error('获取公告列表失败');\n        }\n      }).catch(() => {\n        this.loading = false;\n        this.$message.error('获取公告列表失败');\n      });\n    },\n    createAnnouncement() {\n      this.$router.push('/admin/announcement/create');\n    },\n    viewAnnouncement(row) {\n      this.$router.push(`/admin/announcement/detail/${row.id}`);\n    },\n    editAnnouncement(row) {\n      this.$router.push(`/admin/announcement/edit/${row.id}`);\n    },\n    publishAnnouncement(row) {\n      this.$confirm('确认发布此公告?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$api.adminPublishAnnouncement(row.id).then(res => {\n          if (res.status_code === 1) {\n            this.$message.success('公告发布成功');\n            this.fetchAnnouncementList();\n          } else {\n            this.$message.error('公告发布失败');\n          }\n        }).catch(() => {\n          this.$message.error('公告发布失败');\n        });\n      }).catch(() => {});\n    },\n    deleteAnnouncement(row) {\n      this.$confirm('确认删除此公告? 删除后无法恢复!', '警告', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'error'\n      }).then(() => {\n        this.$api.adminDeleteAnnouncement(row.id).then(res => {\n          if (res.status_code === 1) {\n            this.$message.success('公告删除成功');\n            this.fetchAnnouncementList();\n          } else {\n            this.$message.error('公告删除失败');\n          }\n        }).catch(() => {\n          this.$message.error('公告删除失败');\n        });\n      }).catch(() => {});\n    },\n    handleSearch() {\n      this.queryParams.page = 1;\n      this.fetchAnnouncementList();\n    },\n    resetQuery() {\n      this.queryParams = {\n        page: 1,\n        size: 10,\n        type: null,\n        status: null,\n        isImportant: null\n      };\n      this.fetchAnnouncementList();\n    },\n    handleCurrentChange(page) {\n      this.queryParams.page = page;\n      this.fetchAnnouncementList();\n    },\n    getTypeName(type) {\n      switch (type) {\n        case 1: return '系统更新';\n        case 2: return '活动通知';\n        case 3: return '规则变更';\n        default: return '未知类型';\n      }\n    },\n    getTypeTag(type) {\n      switch (type) {\n        case 1: return 'primary';\n        case 2: return 'success';\n        case 3: return 'warning';\n        default: return 'info';\n      }\n    },\n    getStatusName(status) {\n      switch (status) {\n        case 0: return '草稿';\n        case 1: return '已发布';\n        case 2: return '已过期';\n        default: return '未知';\n      }\n    },\n    getStatusTag(status) {\n      switch (status) {\n        case 0: return 'info';\n        case 1: return 'success';\n        case 2: return 'danger';\n        default: return '';\n      }\n    },\n    formatDate(dateString) {\n      if (!dateString) return '';\n      const date = new Date(dateString);\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')} ${String(date.getHours()).padStart(2, '0')}:${String(date.getMinutes()).padStart(2, '0')}`;\n    }\n  }\n};\n</script>\n\n<style scoped>\n.admin-announcement-list {\n  padding: 20px;\n}\n\n.admin-announcement-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.header-title {\n  font-size: 20px;\n  font-weight: bold;\n}\n\n.filter-container {\n  margin-bottom: 20px;\n  display: flex;\n  flex-wrap: wrap;\n}\n\n.filter-item {\n  margin-right: 10px;\n  margin-bottom: 10px;\n  width: 150px;\n}\n\n.important-tag {\n  display: inline-block;\n  padding: 2px 5px;\n  background-color: #F56C6C;\n  color: white;\n  border-radius: 3px;\n  font-size: 12px;\n  margin-right: 5px;\n}\n\n.pagination-container {\n  margin-top: 20px;\n  text-align: right;\n}\n\n.danger-btn {\n  color: #F56C6C;\n}\n</style> "],"mappings":"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","ignoreList":[]}]}