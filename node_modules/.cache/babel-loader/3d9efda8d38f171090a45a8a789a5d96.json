{"remainingRequest":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js!/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/-Second-hand-mall/src/components/page/order.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Desktop/-Second-hand-mall/src/components/page/order.vue","mtime":1742021277231},{"path":"/Users/macos/Desktop/-Second-hand-mall/babel.config.js","mtime":1741743639580},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js","mtime":1741743640250},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js","mtime":1741743643788}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.regexp.split\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.string.starts-with\";\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nexport default {\n  name: \"order\",\n  components: {\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      innerVisible: false,\n      addressDialogVisible: false,\n      addressData: [],\n      orderStatus: ['待付款', '待发货', '待收货', '已完成', '已取消'],\n      addressForm: {\n        consigneeName: '',\n        consigneePhone: '',\n        provinceName: '',\n        cityName: '',\n        regionName: '',\n        detailAddress: '',\n        defaultFlag: false\n      },\n      selectedOptions: [],\n      //存放默认值\n      orderInfo: {\n        createTime: \"\",\n        id: 0,\n        idleId: 0,\n        idleItem: {\n          id: '',\n          idleName: '',\n          idleDetails: '',\n          pictureList: [],\n          idlePrice: 0,\n          idlePlace: '',\n          idleLabel: '',\n          idleStatus: -1,\n          userId: ''\n        },\n        orderNumber: \"\",\n        orderPrice: 0,\n        orderStatus: 0,\n        paymentStatus: 0,\n        paymentTime: \"\",\n        paymentWay: \"\",\n        userId: 0\n      },\n      addressInfo: {\n        id: '',\n        update: false,\n        consigneeName: '',\n        consigneePhone: '',\n        detailAddress: ''\n      },\n      userId: ''\n    };\n  },\n  created: function created() {\n    var _this = this;\n    this.userId = this.getCookie('shUserId');\n    console.log('userId', this.userId, this.getCookie('shUserId'));\n    var orderId = this.$route.query.id;\n    console.log(orderId);\n    debugger;\n    this.$api.getOrder({\n      id: orderId\n    }).then(function (res) {\n      console.log(res);\n      if (res.status_code === 1) {\n        if (res.data.idleItem) {\n          try {\n            var imgList = res.data.idleItem.pictureList ? JSON.parse(res.data.idleItem.pictureList) : [];\n            if (imgList && imgList.length > 0) {\n              // 使用getImageUrl方法处理图片URL\n              res.data.idleItem.imgUrl = _this.getImageUrl(imgList[0]);\n            } else {\n              res.data.idleItem.imgUrl = '';\n            }\n          } catch (error) {\n            console.error('解析商品图片列表失败:', error);\n            res.data.idleItem.imgUrl = '';\n          }\n        } else {\n          res.data.idleItem = {\n            idleName: '',\n            imgUrl: ''\n          };\n        }\n        _this.orderInfo = res.data;\n        _this.$api.getOrderAddress({\n          orderId: _this.orderInfo.id\n        }).then(function (res) {\n          if (res.data) {\n            _this.addressInfo = res.data;\n            _this.addressInfo.update = true;\n          } else {\n            _this.getAddressData();\n          }\n        });\n      }\n    });\n  },\n  methods: {\n    getImageUrl: function getImageUrl(url) {\n      // 检查url是否已经是HTTP URL\n      if (url && (url.startsWith('http://') || url.startsWith('https://'))) {\n        return url;\n      }\n\n      // 检查url是否是一个本地文件路径\n      if (url && (url.startsWith('/') || url.startsWith('D:') || url.includes('\\\\') || url.includes('/'))) {\n        // 如果是本地路径，则转换为服务器URL\n        // 这里假设文件名是路径最后的部分\n        var fileName = url.split(/[/\\\\]/).pop();\n        // 构建访问URL\n        return \"http://localhost:8082/image?imageName=\".concat(fileName);\n      }\n\n      // 如果是简单的文件名，直接构建访问URL\n      if (url && url.trim() !== '') {\n        return \"http://localhost:8082/image?imageName=\".concat(url);\n      }\n\n      // 其他情况直接返回\n      return url;\n    },\n    saveAddress: function saveAddress() {\n      var _this2 = this;\n      this.$api.addAddress(this.addressForm).then(function (res) {\n        if (res.status_code === 1) {\n          _this2.$message({\n            message: '新增成功！',\n            type: 'success'\n          });\n          _this2.selectedOptions = [];\n          _this2.addressInfo = {\n            consigneeName: '',\n            consigneePhone: '',\n            provinceName: '',\n            cityName: '',\n            regionName: '',\n            detailAddress: '',\n            defaultFlag: false\n          };\n          _this2.innerVisible = false;\n          _this2.getAddressData();\n        } else {\n          _this2.$message.error('系统异常，新增失败！');\n        }\n      }).catch(function (e) {\n        _this2.$message.error('网络异常！');\n      });\n    },\n    handleSubmit: function handleSubmit() {},\n    getCookie: function getCookie(cname) {\n      var name = cname + \"=\";\n      var ca = document.cookie.split(';');\n      for (var i = 0; i < ca.length; i++) {\n        var c = ca[i].trim();\n        if (c.indexOf(name) === 0) return c.substring(name.length, c.length);\n      }\n      return \"0\";\n    },\n    toDetails: function toDetails(id) {\n      this.$router.replace({\n        path: 'details',\n        query: {\n          id: id\n        }\n      });\n    },\n    selectAddressDialog: function selectAddressDialog() {\n      if (this.orderInfo.userId == this.userId && this.orderInfo.orderStatus === 0) {\n        this.addressDialogVisible = true;\n        if (this.addressData.length === 0) {\n          this.getAddressData();\n        }\n      }\n    },\n    getAddressData: function getAddressData() {\n      var _this3 = this;\n      this.$api.getAddress().then(function (res) {\n        if (res.status_code === 1) {\n          var data = res.data;\n          for (var i = 0; i < data.length; i++) {\n            data[i].detailAddressText = data[i].provinceName + data[i].cityName + data[i].regionName + data[i].detailAddress;\n          }\n          console.log(data);\n          _this3.addressData = data;\n          if (!_this3.addressInfo.update) {\n            for (var _i = 0; _i < data.length; _i++) {\n              if (data[_i].defaultFlag) {\n                _this3.selectAddress(_i, data[_i]);\n              }\n            }\n          }\n        }\n      });\n    },\n    selectAddress: function selectAddress(i, item) {\n      var _this4 = this;\n      // this.addressDialogVisible=false;\n      console.log(item, this.addressInfo);\n      this.addressInfo.consigneeName = item.consigneeName;\n      this.addressInfo.consigneePhone = item.consigneePhone;\n      this.addressInfo.detailAddress = item.detailAddressText;\n      if (this.addressInfo.update) {\n        this.$api.updateOrderAddress({\n          id: this.addressInfo.id,\n          consigneeName: item.consigneeName,\n          consigneePhone: item.consigneePhone,\n          detailAddress: item.detailAddressText\n        });\n      } else {\n        this.$api.addOrderAddress({\n          orderId: this.orderInfo.id,\n          consigneeName: item.consigneeName,\n          consigneePhone: item.consigneePhone,\n          detailAddress: item.detailAddressText\n        }).then(function (res) {\n          if (res.status_code === 1) {\n            _this4.addressInfo.update = true;\n            _this4.addressInfo.id = res.data.id;\n          } else {\n            _this4.$message.error(res.msg);\n          }\n        });\n      }\n    },\n    changeOrderStatus: function changeOrderStatus(orderStatus, orderInfo) {\n      var _this5 = this;\n      if (orderStatus === 1) {\n        console.log('zhifu');\n        if (!this.addressInfo.detailAddress) {\n          this.$message.error('请选择地址！');\n        } else {\n          this.$confirm('模拟支付宝支付，是否确认支付', '支付订单', {\n            confirmButtonText: '支付',\n            cancelButtonText: '取消',\n            type: 'warning'\n          }).then(function () {\n            var address = \"http://localhost:8087/alipay/pay?subject=\" + orderInfo.orderNumber + \"&traceNo=\" + orderInfo.id + \"&totalAmount=\" + orderInfo.idleItem.idlePrice;\n\n            // console.log(res.data[0]);\n            // res.data.\n            window.open(address);\n\n            //     this.$api.updateOrder({\n            //             id: orderInfo.id,\n            //             orderStatus: orderStatus,\n            //             paymentStatus: 1,\n            //             paymentWay: '支付宝',\n            //         }).then(res => {\n            //             var address = \"http://localhost:8080/alipay/pay?name=\" + orderInfo.id + \"&no=\"+\n            //               Math.random().toString(36).substr(2) + \"&price=\" + orderInfo.idleItem.idlePrice;\n            //\n            //             console.log(res.data[0]);\n            //             // res.data.\n            //             window.open(address)\n            //\n            //             if (res.status_code === 1) {\n            //                 this.$message({\n            //                     message: '支付成功！',\n            //                     type: 'success'\n            //                 });\n            //                 this.orderInfo.orderStatus = orderStatus;\n            //                 this.orderInfo.paymentStatus = 1;\n            //                 this.orderInfo.paymentWay = '支付宝';\n            //                 this.orderInfo.paymentTime = res.data.paymentTime;\n            //             }\n            //         })\n            //\n            // }).catch(() => {\n          });\n        }\n      } else {\n        this.$api.updateOrder({\n          id: orderInfo.id,\n          orderStatus: orderStatus\n        }).then(function (res) {\n          if (res.status_code === 1) {\n            _this5.$message({\n              message: '操作成功！',\n              type: 'success'\n            });\n            _this5.orderInfo.orderStatus = orderStatus;\n          }\n        });\n      }\n    }\n  }\n};",{"version":3,"names":["AppHead","AppBody","AppFoot","name","components","data","innerVisible","addressDialogVisible","addressData","orderStatus","addressForm","consigneeName","consigneePhone","provinceName","cityName","regionName","detailAddress","defaultFlag","selectedOptions","orderInfo","createTime","id","idleId","idleItem","idleName","idleDetails","pictureList","idlePrice","idlePlace","idleLabel","idleStatus","userId","orderNumber","orderPrice","paymentStatus","paymentTime","paymentWay","addressInfo","update","created","_this","getCookie","console","log","orderId","$route","query","$api","getOrder","then","res","status_code","imgList","JSON","parse","length","imgUrl","getImageUrl","error","getOrderAddress","getAddressData","methods","url","startsWith","includes","fileName","split","pop","concat","trim","saveAddress","_this2","addAddress","$message","message","type","catch","e","handleSubmit","cname","ca","document","cookie","i","c","indexOf","substring","toDetails","$router","replace","path","selectAddressDialog","_this3","getAddress","detailAddressText","selectAddress","item","_this4","updateOrderAddress","addOrderAddress","msg","changeOrderStatus","_this5","$confirm","confirmButtonText","cancelButtonText","address","window","open","updateOrder"],"sources":["src/components/page/order.vue"],"sourcesContent":["<template>\n    <div>\n        <app-head></app-head>\n        <app-body>\n            <div class=\"order-page-container\">\n                <div class=\"idle-info-container\" @click=\"toDetails(orderInfo.idleItem.id)\">\n                    <el-image\n                            style=\"width: 150px; height: 150px;\"\n                            :src=\"orderInfo.idleItem.imgUrl\"\n                            fit=\"cover\"></el-image>\n                    <div class=\"idle-info-title\">{{orderInfo.userId==userId?'买到的':'卖出的'}}：{{orderInfo.idleItem.idleName}}</div>\n                    <div class=\"idle-info-price\">￥{{orderInfo.orderPrice}}</div>\n\n                </div>\n                <div class=\"address-container\" @click.stop=\"selectAddressDialog\" :style=\"orderInfo.userId==userId&&orderInfo.orderStatus===0?'cursor: pointer;':''\">\n                    <div class=\"address-title\">收货地址: {{addressInfo.consigneeName}} {{addressInfo.consigneePhone}}</div>\n                    <div class=\"address-detials\">{{addressInfo.detailAddress}}</div>\n                    <el-button v-if=\"!addressInfo.detailAddress\" @click.stop=\"selectAddressDialog\" type=\"primary\" plain>选择收货地址</el-button>\n                </div>\n                <el-dialog\n                        title=\"选择地址\"\n                        :visible.sync=\"addressDialogVisible\"\n                        width=\"800px\">\n                    <el-dialog\n                        width=\"50%\"\n                        title=\"添 加 收 货 地 址\"\n                        :visible.sync=\"innerVisible\"\n                        append-to-body>\n                        <el-form :model=\"addressForm\" ref=\"addressForm\" label-width=\"100px\" @submit.prevent=\"handleSubmit\">\n                            <!-- 手机号 -->\n                            <el-form-item label=\"手机号\" prop=\"phone\">\n                                <el-input v-model=\"addressForm.consigneePhone\" placeholder=\"请输入手机号\"></el-input>\n                            </el-form-item>\n\n                            <!-- 姓名 -->\n                            <el-form-item label=\"姓名\" prop=\"name\">\n                                <el-input v-model=\"addressForm.consigneeName\" placeholder=\"请输入姓名\"></el-input>\n                            </el-form-item>\n\n                            <!-- 具体地址 -->\n                            <el-form-item label=\"具体地址\" prop=\"detail\">\n                                <el-input v-model=\"addressForm.detailAddress\" type=\"textarea\" placeholder=\"请输入详细地址\"></el-input>\n                            </el-form-item>\n\n<!--                            <div slot=\"footer\" class=\"dialog-footer\">-->\n                                <el-button @click=\"innerVisible = false\">取 消</el-button>\n                                <el-button type=\"primary\" @click=\"saveAddress\">保 存</el-button>\n<!--                            </div>-->\n                        </el-form>\n                    </el-dialog>\n\n                    <div slot=\"footer\" class=\"dialog-footer\">\n                        <el-button @click=\"addressDialogVisible = false\">取 消</el-button>\n                        <el-button type=\"primary\" @click=\"innerVisible = true\">添 加 收 货 地 址</el-button>\n                    </div>\n                    <el-table\n                            stripe\n                            empty-text=\"无地址信息，请先添加地址\"\n                            :data=\"addressData\"\n                            style=\"width: 100%\">\n                        <el-table-column\n                                prop=\"consigneeName\"\n                                label=\"收货人姓名\"\n                                width=\"120\">\n                        </el-table-column>\n                        <el-table-column\n                                prop=\"consigneePhone\"\n                                label=\"手机号\"\n                                width=\"140\">\n                        </el-table-column>\n                        <el-table-column\n                                prop=\"detailAddressText\"\n                                label=\"地址\">\n                        </el-table-column>\n                        <el-table-column label=\" \" width=\"120\">\n                            <template slot-scope=\"scope\">\n                                <el-button\n                                        size=\"mini\"\n                                        @click=\"selectAddress(scope.$index, scope.row)\">选择\n                                </el-button>\n\n                            </template>\n                        </el-table-column>\n                    </el-table>\n                </el-dialog>\n                <div class=\"order-info-container\">\n                    <div class=\"order-info-title\">订单信息（{{orderStatus[orderInfo.orderStatus]}}）：</div>\n                    <div class=\"order-info-item\">编号：{{orderInfo.orderNumber}}</div>\n                    <div class=\"order-info-item\">支付状态：{{orderInfo.paymentStatus===0?'未支付':'已支付'}}</div>\n                    <div class=\"order-info-item\">支付方式：{{orderInfo.paymentWay}}</div>\n                    <div class=\"order-info-item\">创建时间：{{orderInfo.createTime.substring(0, 10) + ' ' +\n                        orderInfo.createTime.substring(11, 19)}}\n                    </div>\n                    <div class=\"order-info-item\">支付时间：{{orderInfo.paymentTime?orderInfo.paymentTime.substring(0, 10) + ' ' +\n                        orderInfo.paymentTime.substring(11, 19):''}}\n                    </div>\n                </div>\n                <div class=\"menu\">\n                    <el-button v-if=\"userId==orderInfo.userId&&orderInfo.orderStatus===0\" type=\"danger\" plain @click=\"changeOrderStatus(4,orderInfo)\">取消订单</el-button>\n                    <el-button v-if=\"userId==orderInfo.userId&&orderInfo.orderStatus===0\" type=\"primary\" plain @click=\"changeOrderStatus(1,orderInfo)\">立即支付</el-button>\n                    <el-button v-if=\"userId==orderInfo.idleItem.userId&&orderInfo.orderStatus===1\" type=\"primary\" plain @click=\"changeOrderStatus(2,orderInfo)\">发货</el-button>\n                    <el-button v-if=\"userId==orderInfo.userId&&orderInfo.orderStatus===2\" type=\"primary\" plain @click=\"changeOrderStatus(3,orderInfo)\">确认收货</el-button>\n                </div>\n            </div>\n            <app-foot></app-foot>\n        </app-body>\n    </div>\n</template>\n\n<script>\n    import AppHead from '../common/AppHeader.vue';\n    import AppBody from '../common/AppPageBody.vue'\n    import AppFoot from '../common/AppFoot.vue'\n\n    export default {\n        name: \"order\",\n        components: {\n            AppHead,\n            AppBody,\n            AppFoot\n        },\n        data() {\n            return {\n                innerVisible: false,\n                addressDialogVisible:false,\n                addressData: [],\n                orderStatus: ['待付款', '待发货', '待收货', '已完成', '已取消'],\n                addressForm: {\n                    consigneeName: '',\n                    consigneePhone: '',\n                    provinceName: '',\n                    cityName: '',\n                    regionName: '',\n                    detailAddress: '',\n                    defaultFlag: false\n                },\n                selectedOptions: [],//存放默认值\n                orderInfo: {\n                    createTime: \"\",\n                    id: 0,\n                    idleId: 0,\n                    idleItem: {\n                        id: '',\n                        idleName: '',\n                        idleDetails: '',\n                        pictureList: [],\n                        idlePrice: 0,\n                        idlePlace: '',\n                        idleLabel: '',\n                        idleStatus: -1,\n                        userId: '',\n                    },\n                    orderNumber: \"\",\n                    orderPrice: 0,\n                    orderStatus: 0,\n                    paymentStatus: 0,\n                    paymentTime: \"\",\n                    paymentWay: \"\",\n                    userId: 0\n                },\n                addressInfo: {\n                    id:'',\n                    update:false,\n                    consigneeName: '',\n                    consigneePhone: '',\n                    detailAddress: ''\n                },\n                userId:''\n            };\n        },\n        created() {\n            this.userId=this.getCookie('shUserId');\n            console.log('userId',this.userId,this.getCookie('shUserId'));\n            let orderId = this.$route.query.id;\n            console.log(orderId);\n            debugger\n            this.$api.getOrder({\n                id: orderId\n            }).then(res => {\n                console.log(res);\n                if (res.status_code === 1) {\n                    if (res.data.idleItem) {\n                        try {\n                            let imgList = res.data.idleItem.pictureList ? JSON.parse(res.data.idleItem.pictureList) : [];\n                            if (imgList && imgList.length > 0) {\n                                // 使用getImageUrl方法处理图片URL\n                                res.data.idleItem.imgUrl = this.getImageUrl(imgList[0]);\n                            } else {\n                                res.data.idleItem.imgUrl = '';\n                            }\n                        } catch (error) {\n                            console.error('解析商品图片列表失败:', error);\n                            res.data.idleItem.imgUrl = '';\n                        }\n                    } else {\n                        res.data.idleItem = {\n                            idleName: '',\n                            imgUrl: ''\n                        }\n                    }\n                    this.orderInfo = res.data;\n                    this.$api.getOrderAddress({\n                        orderId:this.orderInfo.id\n                    }).then(res=>{\n                        if(res.data){\n                            this.addressInfo= res.data;\n                            this.addressInfo.update=true;\n                        }else{\n                            this.getAddressData();\n                        }\n                    })\n                }\n            })\n        },\n        methods: {\n            getImageUrl(url) {\n                // 检查url是否已经是HTTP URL\n                if (url && (url.startsWith('http://') || url.startsWith('https://'))) {\n                    return url;\n                }\n                \n                // 检查url是否是一个本地文件路径\n                if (url && (url.startsWith('/') || url.startsWith('D:') || url.includes('\\\\') || url.includes('/'))) {\n                    // 如果是本地路径，则转换为服务器URL\n                    // 这里假设文件名是路径最后的部分\n                    const fileName = url.split(/[/\\\\]/).pop();\n                    // 构建访问URL\n                    return `http://localhost:8082/image?imageName=${fileName}`;\n                }\n                \n                // 如果是简单的文件名，直接构建访问URL\n                if (url && url.trim() !== '') {\n                    return `http://localhost:8082/image?imageName=${url}`;\n                }\n                \n                // 其他情况直接返回\n                return url;\n            },\n            saveAddress(){\n                this.$api.addAddress(this.addressForm).then(res => {\n                    if (res.status_code === 1) {\n                        this.$message({\n                            message: '新增成功！',\n                            type: 'success'\n                        });\n                        this.selectedOptions = [];\n                        this.addressInfo = {\n                            consigneeName: '',\n                            consigneePhone: '',\n                            provinceName: '',\n                            cityName: '',\n                            regionName: '',\n                            detailAddress: '',\n                            defaultFlag: false\n                        };\n                        this.innerVisible = false;\n                        this.getAddressData();\n                    } else {\n                        this.$message.error('系统异常，新增失败！')\n                    }\n                }).catch(e => {\n                    this.$message.error('网络异常！')\n                })\n            },\n\n            handleSubmit(){\n\n            },\n            getCookie(cname){\n                var name = cname + \"=\";\n                var ca = document.cookie.split(';');\n                for(var i=0; i<ca.length; i++)\n                {\n                    var c = ca[i].trim();\n                    if (c.indexOf(name)===0) return c.substring(name.length,c.length);\n                }\n                return \"0\";\n            },\n            toDetails(id) {\n                this.$router.replace({path: 'details', query: {id: id}});\n            },\n            selectAddressDialog(){\n                if(this.orderInfo.userId==this.userId&&this.orderInfo.orderStatus===0){\n                    this.addressDialogVisible=true;\n                    if(this.addressData.length===0){\n                        this.getAddressData();\n                    }\n                }\n            },\n            getAddressData(){\n                this.$api.getAddress().then(res => {\n                    if (res.status_code === 1) {\n                        let data = res.data;\n                        for (let i = 0; i < data.length; i++) {\n                            data[i].detailAddressText = data[i].provinceName + data[i].cityName + data[i].regionName + data[i].detailAddress;\n                        }\n                        console.log(data);\n                        this.addressData = data;\n                        if(!this.addressInfo.update){\n                            for(let i=0;i<data.length;i++){\n                                if(data[i].defaultFlag){\n                                    this.selectAddress(i,data[i]);\n                                }\n                            }\n                        }\n                    }\n                })\n            },\n            selectAddress(i,item){\n                // this.addressDialogVisible=false;\n                console.log(item,this.addressInfo);\n                this.addressInfo.consigneeName=item.consigneeName;\n                this.addressInfo.consigneePhone=item.consigneePhone;\n                this.addressInfo.detailAddress=item.detailAddressText;\n                if(this.addressInfo.update){\n                    this.$api.updateOrderAddress({\n                        id:this.addressInfo.id,\n                        consigneeName:item.consigneeName,\n                        consigneePhone:item.consigneePhone,\n                        detailAddress:item.detailAddressText\n                    })\n                }else{\n                    this.$api.addOrderAddress({\n                        orderId:this.orderInfo.id,\n                        consigneeName:item.consigneeName,\n                        consigneePhone:item.consigneePhone,\n                        detailAddress:item.detailAddressText\n                    }).then(res=>{\n                        if(res.status_code===1){\n                            this.addressInfo.update=true;\n                            this.addressInfo.id=res.data.id;\n                        }else {\n                            this.$message.error(res.msg)\n                        }\n                    })\n                }\n\n            },\n            changeOrderStatus(orderStatus, orderInfo) {\n                if (orderStatus === 1) {\n                    console.log('zhifu');\n                    if(!this.addressInfo.detailAddress){\n                        this.$message.error('请选择地址！')\n                    }else{\n                        this.$confirm('模拟支付宝支付，是否确认支付', '支付订单', {\n                            confirmButtonText: '支付',\n                            cancelButtonText: '取消',\n                            type: 'warning'\n                        }).then(() => {\n                            var address = \"http://localhost:8087/alipay/pay?subject=\" + orderInfo.orderNumber+ \"&traceNo=\" +\n                                orderInfo.id + \"&totalAmount=\" + orderInfo.idleItem.idlePrice;\n\n                            // console.log(res.data[0]);\n                            // res.data.\n                            window.open(address)\n\n                        //     this.$api.updateOrder({\n                        //             id: orderInfo.id,\n                        //             orderStatus: orderStatus,\n                        //             paymentStatus: 1,\n                        //             paymentWay: '支付宝',\n                        //         }).then(res => {\n                        //             var address = \"http://localhost:8080/alipay/pay?name=\" + orderInfo.id + \"&no=\"+\n                        //               Math.random().toString(36).substr(2) + \"&price=\" + orderInfo.idleItem.idlePrice;\n                        //\n                        //             console.log(res.data[0]);\n                        //             // res.data.\n                        //             window.open(address)\n                        //\n                        //             if (res.status_code === 1) {\n                        //                 this.$message({\n                        //                     message: '支付成功！',\n                        //                     type: 'success'\n                        //                 });\n                        //                 this.orderInfo.orderStatus = orderStatus;\n                        //                 this.orderInfo.paymentStatus = 1;\n                        //                 this.orderInfo.paymentWay = '支付宝';\n                        //                 this.orderInfo.paymentTime = res.data.paymentTime;\n                        //             }\n                        //         })\n                        //\n                        // }).catch(() => {\n                        });\n                    }\n                } else {\n                    this.$api.updateOrder({\n                        id: orderInfo.id,\n                        orderStatus: orderStatus,\n                    }).then(res => {\n                        if (res.status_code === 1) {\n                            this.$message({\n                                message: '操作成功！',\n                                type: 'success'\n                            });\n                            this.orderInfo.orderStatus = orderStatus;\n                        }\n                    })\n                }\n            },\n        }\n\n    }\n</script>\n\n<style scoped>\n    .order-page-container {\n        min-height: 85vh;\n    }\n\n    .idle-info-container {\n        width: 100%;\n        display: flex;\n        border-bottom: 20px solid #f6f6f6;\n        padding: 20px;\n        cursor: pointer;\n    }\n\n    .idle-info-title {\n        font-size: 18px;\n        font-weight: 600;\n        max-width: 750px;\n        margin-left: 10px;\n    }\n\n    .idle-info-price {\n        font-size: 18px;\n        color: red;\n        margin-left: 10px;\n    }\n\n    .address-container {\n        min-height: 60px;\n        padding: 20px;\n        border-bottom: 20px solid #f6f6f6;\n\n    }\n\n    .address-title {\n        font-size: 18px;\n        font-weight: 600;\n        margin-bottom: 10px;\n    }\n\n    .address-detials {\n        font-size: 16px;\n        color: #444444;\n    }\n\n    .order-info-container {\n        padding: 20px;\n    }\n\n    .order-info-item {\n        margin: 10px 0;\n        font-size: 14px;\n        color: #444444;\n    }\n\n    .menu {\n        margin-left: 20px;\n    }\n</style>\n"],"mappings":"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","ignoreList":[]}]}