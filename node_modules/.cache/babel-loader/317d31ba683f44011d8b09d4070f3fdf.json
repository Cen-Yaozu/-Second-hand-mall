{"remainingRequest":"D:\\Desktop\\-Second-hand-mall\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\-Second-hand-mall\\src\\components\\page\\index.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\-Second-hand-mall\\src\\components\\page\\index.vue","mtime":1741232832334},{"path":"D:\\Desktop\\-Second-hand-mall\\babel.config.js","mtime":1741159852048},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\babel-loader\\lib\\index.js","mtime":1741229036772},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js","mtime":1741229036465}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport AppHead from \"../common/AppHeader.vue\";\nimport AppBody from \"../common/AppPageBody.vue\";\nimport AppFoot from \"../common/AppFoot.vue\";\nimport AppCarousel from '@/components/common/AppCarousel';\nexport default {\n  name: \"index\",\n  components: {\n    AppCarousel: AppCarousel,\n    AppHead: AppHead,\n    AppBody: AppBody,\n    AppFoot: AppFoot\n  },\n  data: function data() {\n    return {\n      labelName: '0',\n      idleList: [],\n      currentPage: 1,\n      totalItem: 1\n    };\n  },\n  created: function created() {\n    this.findIdleTiem(1);\n  },\n  mounted: function mounted() {},\n  watch: {\n    $route: function $route(to, from) {\n      this.labelName = to.query.labelName;\n      var val = parseInt(to.query.page) ? parseInt(to.query.page) : 1;\n      // let totalPage=parseInt(this.totalItem/8)+1;\n      // val=parseInt(val%totalPage);\n      // val=val===0?totalPage:val;\n      this.currentPage = parseInt(to.query.page) ? parseInt(to.query.page) : 1;\n      this.findIdleTiem(val);\n    }\n  },\n  methods: {\n    findIdleTiem: function findIdleTiem(page) {\n      var _this = this;\n      var loading = this.$loading({\n        lock: true,\n        text: '加载数据中',\n        spinner: 'el-icon-loading',\n        background: 'rgba(0, 0, 0, 0)'\n      });\n      if (this.labelName > 0) {\n        this.$api.findIdleTiemByLable({\n          idleLabel: this.labelName,\n          page: page,\n          nums: 8\n        }).then(function (res) {\n          console.log(res);\n          var list = res.data.list;\n          for (var i = 0; i < list.length; i++) {\n            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\n            var pictureList = JSON.parse(list[i].pictureList);\n            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n          }\n          _this.idleList = list;\n          _this.totalItem = res.data.count;\n          console.log(_this.totalItem);\n        }).catch(function (e) {\n          console.log(e);\n        }).finally(function () {\n          loading.close();\n        });\n      } else {\n        this.$api.findIdleTiem({\n          page: page,\n          nums: 8\n        }).then(function (res) {\n          console.log(res);\n          var list = res.data.list;\n          for (var i = 0; i < list.length; i++) {\n            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\n            var pictureList = JSON.parse(list[i].pictureList);\n            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\n          }\n          _this.idleList = list;\n          _this.totalItem = res.data.count;\n          console.log(_this.totalItem);\n        }).catch(function (e) {\n          console.log(e);\n        }).finally(function () {\n          loading.close();\n        });\n      }\n    },\n    handleClick: function handleClick(tab, event) {\n      // console.log(tab,event);\n      console.log(this.labelName);\n      this.$router.replace({\n        query: {\n          page: 1,\n          labelName: this.labelName\n        }\n      });\n    },\n    handleCurrentChange: function handleCurrentChange(val) {\n      console.log(\"\\u5F53\\u524D\\u9875: \".concat(val));\n      this.$router.replace({\n        query: {\n          page: val,\n          labelName: this.labelName\n        }\n      });\n    },\n    toDetails: function toDetails(idle) {\n      this.$router.push({\n        path: '/details',\n        query: {\n          id: idle.id\n        }\n      });\n    }\n  }\n};",{"version":3,"names":["AppHead","AppBody","AppFoot","AppCarousel","name","components","data","labelName","idleList","currentPage","totalItem","created","findIdleTiem","mounted","watch","$route","to","from","query","val","parseInt","page","methods","_this","loading","$loading","lock","text","spinner","background","$api","findIdleTiemByLable","idleLabel","nums","then","res","console","log","list","i","length","timeStr","releaseTime","substring","pictureList","JSON","parse","imgUrl","count","catch","e","finally","close","handleClick","tab","event","$router","replace","handleCurrentChange","concat","toDetails","idle","push","path","id"],"sources":["src/components/page/index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <app-head></app-head>\r\n<!--        <app-carousel></app-carousel>-->\r\n\r\n        <app-body>\r\n            <div class=\"apple-container home-container\">\r\n                <div class=\"home-header\">\r\n                    <h1 class=\"home-title\">校易购</h1>\r\n                    <p class=\"home-subtitle\">发现校园里的闲置宝藏</p>\r\n                </div>\r\n                \r\n                <div class=\"category-tabs\">\r\n                    <el-tabs v-model=\"labelName\" type=\"card\" @tab-click=\"handleClick\">\r\n                        <el-tab-pane label=\"全部\" name=\"0\"></el-tab-pane>\r\n                        <el-tab-pane label=\"数码科技\" name=\"1\"></el-tab-pane>\r\n                        <el-tab-pane label=\"生活用品\" name=\"2\"></el-tab-pane>\r\n                        <el-tab-pane label=\"运动相关\" name=\"3\"></el-tab-pane>\r\n                        <el-tab-pane label=\"图书笔记\" name=\"4\"></el-tab-pane>\r\n                        <el-tab-pane label=\"社区帖子\" name=\"5\"></el-tab-pane>\r\n<!--                <el-tab-pane label=\"已被购买商品\" name=\"6\"></el-tab-pane>-->\r\n                    </el-tabs>\r\n                </div>\r\n                \r\n                <div class=\"products-grid\">\r\n                    <div class=\"product-card\" v-for=\"(idle, index) in idleList\" :key=\"index\" @click=\"toDetails(idle)\">\r\n                        <div class=\"product-image-container\">\r\n                            <el-image class=\"product-image\" :src=\"idle.imgUrl\" fit=\"cover\">\r\n                                <div slot=\"error\" class=\"image-placeholder\">\r\n                                    <i class=\"el-icon-picture-outline\"></i>\r\n                                </div>\r\n                            </el-image>\r\n                        </div>\r\n                        <div class=\"product-content\">\r\n                            <h3 class=\"product-title\">{{idle.idleName}}</h3>\r\n                            <div class=\"product-meta\">\r\n                                <span v-show=\"idle.idlePrice !== 0\" class=\"product-price\">¥{{idle.idlePrice}}</span>\r\n                                <span v-show=\"idle.idlePrice === 0\" class=\"product-price\">免费</span>\r\n                                <span class=\"product-location\">{{idle.idlePlace}}</span>\r\n                            </div>\r\n                            <div class=\"product-footer\">\r\n                                <span class=\"product-time\">{{idle.timeStr}}</span>\r\n                                <div class=\"product-user\">\r\n                                    <el-avatar :size=\"24\" :src=\"idle.user.avatar\" class=\"user-avatar\"></el-avatar>\r\n                                    <span class=\"user-name\">{{idle.user.nickname}}</span>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                \r\n                <div class=\"pagination-container\">\r\n                    <el-pagination\r\n                        background\r\n                        @current-change=\"handleCurrentChange\"\r\n                        :current-page.sync=\"currentPage\"\r\n                        :page-size=\"8\"\r\n                        layout=\"prev, pager, next, jumper\"\r\n                        :total=\"totalItem\">\r\n                    </el-pagination>\r\n                </div>\r\n            </div>\r\n            \r\n            <app-foot></app-foot>\r\n        </app-body>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import AppHead from '../common/AppHeader.vue';\r\n    import AppBody from '../common/AppPageBody.vue'\r\n    import AppFoot from '../common/AppFoot.vue'\r\n    import AppCarousel from '@/components/common/AppCarousel';\r\n\r\n    export default {\r\n        name: \"index\",\r\n        components: {\r\n            AppCarousel,\r\n            AppHead,\r\n            AppBody,\r\n            AppFoot\r\n        },\r\n        data() {\r\n            return {\r\n                labelName: '0',\r\n                idleList: [],\r\n                currentPage: 1,\r\n                totalItem: 1,\r\n            };\r\n        },\r\n        created() {\r\n            this.findIdleTiem(1)\r\n        },\r\n        mounted() {\r\n\r\n        },\r\n        watch:{\r\n            $route(to,from){\r\n                this.labelName=to.query.labelName;\r\n                let val=parseInt(to.query.page)?parseInt(to.query.page):1;\r\n                // let totalPage=parseInt(this.totalItem/8)+1;\r\n                // val=parseInt(val%totalPage);\r\n                // val=val===0?totalPage:val;\r\n                this.currentPage=parseInt(to.query.page)?parseInt(to.query.page):1;\r\n                this.findIdleTiem(val);\r\n            }\r\n        },\r\n        methods: {\r\n            findIdleTiem(page){\r\n                const loading = this.$loading({\r\n                    lock: true,\r\n                    text: '加载数据中',\r\n                    spinner: 'el-icon-loading',\r\n                    background: 'rgba(0, 0, 0, 0)'\r\n                });\r\n                if(this.labelName>0){\r\n                    this.$api.findIdleTiemByLable({\r\n                        idleLabel:this.labelName,\r\n                        page: page,\r\n                        nums: 8\r\n                    }).then(res => {\r\n                        console.log(res);\r\n                        let list = res.data.list;\r\n                        for (let i = 0; i < list.length; i++) {\r\n                            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\r\n                            let pictureList = JSON.parse(list[i].pictureList);\r\n                            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\r\n                        }\r\n                        this.idleList = list;\r\n                        this.totalItem=res.data.count;\r\n                        console.log(this.totalItem);\r\n                    }).catch(e => {\r\n                        console.log(e)\r\n                    }).finally(()=>{\r\n                        loading.close();\r\n                    })\r\n                }else{\r\n                    this.$api.findIdleTiem({\r\n                        page: page,\r\n                        nums: 8\r\n                    }).then(res => {\r\n                        console.log(res);\r\n                        let list = res.data.list;\r\n                        for (let i = 0; i < list.length; i++) {\r\n                            list[i].timeStr = list[i].releaseTime.substring(0, 10) + \" \" + list[i].releaseTime.substring(11, 19);\r\n                            let pictureList = JSON.parse(list[i].pictureList);\r\n                            list[i].imgUrl = pictureList.length > 0 ? pictureList[0] : '';\r\n                        }\r\n                        this.idleList = list;\r\n                        this.totalItem=res.data.count;\r\n                        console.log(this.totalItem);\r\n                    }).catch(e => {\r\n                        console.log(e)\r\n                    }).finally(()=>{\r\n                        loading.close();\r\n                    })\r\n                }\r\n            },\r\n            handleClick(tab, event) {\r\n                // console.log(tab,event);\r\n                console.log(this.labelName);\r\n                this.$router.replace({query: {page: 1,labelName:this.labelName}});\r\n            },\r\n            handleCurrentChange(val) {\r\n                console.log(`当前页: ${val}`);\r\n                this.$router.replace({query: {page: val,labelName:this.labelName}});\r\n            },\r\n            toDetails(idle) {\r\n                this.$router.push({path: '/details', query: {id: idle.id}});\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n.home-container {\r\n    min-height: 85vh;\r\n    padding-top: var(--spacing-xl);\r\n    padding-bottom: var(--spacing-xxl);\r\n}\r\n\r\n.home-header {\r\n    text-align: center;\r\n    margin-bottom: var(--spacing-xl);\r\n}\r\n\r\n.home-title {\r\n    font-size: 42px;\r\n    font-weight: 700;\r\n    letter-spacing: -0.02em;\r\n    margin-bottom: var(--spacing-sm);\r\n    color: var(--apple-text-primary);\r\n}\r\n\r\n.home-subtitle {\r\n    font-size: 20px;\r\n    color: var(--apple-text-secondary);\r\n    max-width: 600px;\r\n    margin: 0 auto;\r\n}\r\n\r\n.category-tabs {\r\n    margin-bottom: var(--spacing-xl);\r\n}\r\n\r\n.products-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));\r\n    gap: var(--spacing-lg);\r\n    margin-bottom: var(--spacing-xl);\r\n}\r\n\r\n.product-card {\r\n    background-color: var(--apple-bg-primary);\r\n    border-radius: var(--radius-md);\r\n    box-shadow: var(--shadow-md);\r\n    overflow: hidden;\r\n    transition: transform 0.3s ease, box-shadow 0.3s ease;\r\n    cursor: pointer;\r\n    height: 100%;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.product-card:hover {\r\n    transform: translateY(-4px);\r\n    box-shadow: var(--shadow-lg);\r\n}\r\n\r\n.product-image-container {\r\n    height: 200px;\r\n    overflow: hidden;\r\n}\r\n\r\n.product-image {\r\n    width: 100%;\r\n    height: 100%;\r\n    transition: transform 0.5s ease;\r\n}\r\n\r\n.product-card:hover .product-image {\r\n    transform: scale(1.05);\r\n}\r\n\r\n.image-placeholder {\r\n    width: 100%;\r\n    height: 100%;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    background-color: var(--apple-bg-secondary);\r\n    font-size: 24px;\r\n    color: var(--apple-text-secondary);\r\n}\r\n\r\n.product-content {\r\n    padding: var(--spacing-md);\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.product-title {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    margin-bottom: var(--spacing-sm);\r\n    color: var(--apple-text-primary);\r\n    line-height: 1.4;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    height: 2.8em;\r\n}\r\n\r\n.product-meta {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    margin-bottom: var(--spacing-md);\r\n    margin-top: auto;\r\n}\r\n\r\n.product-price {\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: var(--apple-accent);\r\n}\r\n\r\n.product-location {\r\n    font-size: 14px;\r\n    color: var(--apple-text-secondary);\r\n}\r\n\r\n.product-footer {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding-top: var(--spacing-sm);\r\n    border-top: 1px solid var(--apple-bg-secondary);\r\n}\r\n\r\n.product-time {\r\n    font-size: 12px;\r\n    color: var(--apple-text-secondary);\r\n}\r\n\r\n.product-user {\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.user-avatar {\r\n    margin-right: var(--spacing-xs);\r\n}\r\n\r\n.user-name {\r\n    font-size: 12px;\r\n    color: var(--apple-text-secondary);\r\n    white-space: nowrap;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    max-width: 80px;\r\n}\r\n\r\n.pagination-container {\r\n    display: flex;\r\n    justify-content: center;\r\n    margin-top: var(--spacing-xl);\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]}]}