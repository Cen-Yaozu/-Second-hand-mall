{"remainingRequest":"D:\\Desktop\\-Second-hand-mall\\node_modules\\babel-loader\\lib\\index.js!D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\-Second-hand-mall\\src\\components\\common\\AppHeader.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Desktop\\-Second-hand-mall\\src\\components\\common\\AppHeader.vue","mtime":1741232770338},{"path":"D:\\Desktop\\-Second-hand-mall\\babel.config.js","mtime":1741159852048},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\babel-loader\\lib\\index.js","mtime":1741229036772},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js","mtime":1741229036465}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.replace\";\nimport Mixin from '@/utils/mixin';\nexport default {\n  mixins: [Mixin],\n  name: 'Header',\n  props: ['searchInput', 'nicknameValue', 'avatarValue'],\n  data: function data() {\n    return {\n      logoPath: \"/logo.png\",\n      searchValue: this.searchInput,\n      nickname: '登录',\n      avatar: 'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\n      isLogin: false,\n      unreadMessagesCount: 0\n    };\n  },\n  created: function created() {\n    var _this = this;\n    // console.log(\"header\");\n    if (!this.$globalData.userInfo.nickname) {\n      this.$api.getUserInfo().then(function (res) {\n        console.log('Header getUserInfo:', res);\n        if (res.status_code === 1) {\n          _this.nickname = res.data.nickname;\n          _this.avatar = res.data.avatar;\n          res.data.signInTime = res.data.signInTime.substring(0, 10);\n          _this.$globalData.userInfo = res.data;\n          _this.isLogin = true;\n        }\n      });\n    } else {\n      this.nickname = this.$globalData.userInfo.nickname;\n      this.avatar = this.$globalData.userInfo.avatar;\n      this.isLogin = true;\n    }\n    // 获取未读消息数（示例）\n    // 您可以添加实际的API调用来获取未读消息数\n    this.getUnreadCount();\n  },\n  methods: {\n    searchIdle: function searchIdle() {\n      if ('/search' !== this.$route.path) {\n        this.$router.push({\n          path: '/search',\n          query: {\n            searchValue: this.searchValue\n          }\n        });\n      } else {\n        this.$router.replace({\n          path: '/search',\n          query: {\n            searchValue: this.searchValue\n          }\n        });\n        this.$router.go(0);\n      }\n    },\n    toMe: function toMe() {\n      if ('/me' !== this.$route.path) {\n        this.$router.push({\n          path: '/me'\n        });\n      }\n    },\n    toMessage: function toMessage() {\n      if ('/message' !== this.$route.path) {\n        this.$router.push({\n          path: '/message'\n        });\n      }\n    },\n    toRelease: function toRelease() {\n      if ('/release' !== this.$route.path) {\n        this.$router.push({\n          path: '/release'\n        });\n      }\n    },\n    /*这里的logout 只是用前端来删除掉浏览器中之前登录过的用户信息，并没有发送请求*/loginOut: function loginOut() {\n      var _this2 = this;\n      this.$api.logout().then(function (res) {\n        if (res.status_code === 1) {\n          _this2.$globalData.userInfo = {};\n          console.log(\"login out\");\n          if ('/index' === _this2.$route.path) {\n            _this2.$router.go(0);\n          } else {\n            _this2.$router.push({\n              path: '/index'\n            });\n          }\n        } else {\n          _this2.$message.error('网络或系统异常，退出登录失败！');\n        }\n      });\n    },\n    // 示例方法：获取未读消息数\n    getUnreadCount: function getUnreadCount() {\n      // 这里应该是实际的API调用\n      // 暂时模拟为随机数（0-5）\n      this.unreadMessagesCount = Math.floor(Math.random() * 6);\n    }\n  }\n};",{"version":3,"names":["Mixin","mixins","name","props","data","logoPath","searchValue","searchInput","nickname","avatar","isLogin","unreadMessagesCount","created","_this","$globalData","userInfo","$api","getUserInfo","then","res","console","log","status_code","signInTime","substring","getUnreadCount","methods","searchIdle","$route","path","$router","push","query","replace","go","toMe","toMessage","toRelease","loginOut","_this2","logout","$message","error","Math","floor","random"],"sources":["src/components/common/AppHeader.vue"],"sourcesContent":["<template>\r\n    <div class=\"apple-nav\">\r\n        <div class=\"header-container\">\r\n            <div class=\"app-name\">\r\n                <router-link to=\"/\">\r\n                    <img :src=\"logoPath\" class=\"logo\"/>\r\n                </router-link>\r\n            </div>\r\n            <div class=\"search-container\">\r\n                <el-input placeholder=\"搜索闲置物品...\" v-model=\"searchValue\" @keyup.enter.native=\"searchIdle\" class=\"search-input\">\r\n                    <el-button slot=\"append\" icon=\"el-icon-search\" @click=\"searchIdle\"></el-button>\r\n                </el-input>\r\n            </div>\r\n            <div class=\"actions\">\r\n                <el-button type=\"primary\" icon=\"el-icon-plus\" @click=\"toRelease\" class=\"action-btn\">发布</el-button>\r\n                <el-button type=\"primary\" plain icon=\"el-icon-chat-dot-round\" @click=\"toMessage\" class=\"action-btn\" :class=\"{'has-badge': unreadMessagesCount > 0}\">\r\n                    <span class=\"badge\" v-if=\"unreadMessagesCount > 0\">{{unreadMessagesCount}}</span>\r\n                    消息\r\n                </el-button>\r\n            </div>\r\n            <div class=\"user-section\">\r\n                <router-link v-if=\"!isLogin\" class=\"login-btn\" to=\"/login\">登录</router-link>\r\n                <el-dropdown trigger=\"click\" v-else>\r\n                    <div class=\"user-profile\">\r\n                        <div class=\"user-name\">{{nickname}}</div>\r\n                        <el-avatar :src=\"avatar\" class=\"user-avatar\"></el-avatar>\r\n                    </div>\r\n                    <el-dropdown-menu slot=\"dropdown\" class=\"user-dropdown\">\r\n                        <el-dropdown-item><div @click=\"toMe\" class=\"dropdown-option\">个人中心</div></el-dropdown-item>\r\n                        <el-dropdown-item divided><div @click=\"loginOut\" class=\"dropdown-option logout\">退出登录</div></el-dropdown-item>\r\n                    </el-dropdown-menu>\r\n                </el-dropdown>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import Mixin from '@/utils/mixin';\r\n    export default {\r\n        mixins: [Mixin],\r\n        name: 'Header',\r\n        props: ['searchInput','nicknameValue','avatarValue'],\r\n        data() {\r\n            return {\r\n                logoPath: \"/logo.png\",\r\n                searchValue: this.searchInput,\r\n                nickname:'登录',\r\n                avatar:'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\r\n                isLogin:false,\r\n                unreadMessagesCount:0\r\n            };\r\n        },\r\n        created(){\r\n            // console.log(\"header\");\r\n            if(! this.$globalData.userInfo.nickname){\r\n                this.$api.getUserInfo().then(res=>{\r\n                    console.log('Header getUserInfo:',res);\r\n                    if(res.status_code===1){\r\n                        this.nickname=res.data.nickname;\r\n                        this.avatar=res.data.avatar;\r\n                        res.data.signInTime=res.data.signInTime.substring(0,10);\r\n                        this.$globalData.userInfo=res.data;\r\n                        this.isLogin=true;\r\n                    }\r\n                })\r\n            }else {\r\n                this.nickname=this.$globalData.userInfo.nickname;\r\n                this.avatar=this.$globalData.userInfo.avatar;\r\n                this.isLogin=true;\r\n            }\r\n            // 获取未读消息数（示例）\r\n            // 您可以添加实际的API调用来获取未读消息数\r\n            this.getUnreadCount();\r\n        },\r\n        methods: {\r\n            searchIdle() {\r\n                if ('/search' !== this.$route.path) {\r\n                    this.$router.push({path: '/search', query: {searchValue: this.searchValue}});\r\n                } else {\r\n                    this.$router.replace({path: '/search', query: {searchValue: this.searchValue}});\r\n                    this.$router.go(0);\r\n                }\r\n            },\r\n            toMe() {\r\n                if ('/me' !== this.$route.path) {\r\n                    this.$router.push({path: '/me'});\r\n                }\r\n            },\r\n            toMessage(){\r\n                if ('/message' !== this.$route.path) {\r\n                    this.$router.push({path: '/message'});\r\n                }\r\n            },\r\n            toRelease(){\r\n                if ('/release' !== this.$route.path) {\r\n                    this.$router.push({path: '/release'});\r\n                }\r\n            },\r\n            /*这里的logout 只是用前端来删除掉浏览器中之前登录过的用户信息，并没有发送请求*/\r\n            loginOut(){\r\n                this.$api.logout().then(res=>{\r\n                    if(res.status_code===1){\r\n                        this.$globalData.userInfo={};\r\n                        console.log(\"login out\");\r\n                        if ('/index' === this.$route.path) {\r\n                            this.$router.go(0);\r\n                        }else {\r\n                            this.$router.push({path: '/index'});\r\n                        }\r\n                    }else {\r\n                        this.$message.error('网络或系统异常，退出登录失败！');\r\n                    }\r\n                });\r\n            },\r\n            // 示例方法：获取未读消息数\r\n            getUnreadCount() {\r\n                // 这里应该是实际的API调用\r\n                // 暂时模拟为随机数（0-5）\r\n                this.unreadMessagesCount = Math.floor(Math.random() * 6);\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style scoped>\r\n.apple-nav {\r\n    padding: var(--spacing-md) 0;\r\n}\r\n\r\n.header-container {\r\n    max-width: 1200px;\r\n    margin: 0 auto;\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 0 var(--spacing-lg);\r\n}\r\n\r\n.logo {\r\n    width: 40px;\r\n    height: 40px;\r\n    object-fit: contain;\r\n    transition: transform 0.2s ease;\r\n}\r\n\r\n.logo:hover {\r\n    transform: scale(1.05);\r\n}\r\n\r\n.app-name {\r\n    margin-right: var(--spacing-lg);\r\n}\r\n\r\n.search-container {\r\n    flex: 1;\r\n    max-width: 500px;\r\n    margin: 0 var(--spacing-xl);\r\n}\r\n\r\n.search-input >>> .el-input__inner {\r\n    border-radius: var(--radius-pill);\r\n    height: 44px;\r\n    background-color: var(--apple-bg-secondary);\r\n    border: none;\r\n    padding-left: 20px;\r\n}\r\n\r\n.search-input >>> .el-input-group__append {\r\n    border-radius: 0 var(--radius-pill) var(--radius-pill) 0;\r\n    background-color: var(--apple-bg-secondary);\r\n    border: none;\r\n    padding: 0 15px;\r\n}\r\n\r\n.actions {\r\n    display: flex;\r\n    margin-right: var(--spacing-xl);\r\n}\r\n\r\n.action-btn {\r\n    margin-left: var(--spacing-md);\r\n    position: relative;\r\n}\r\n\r\n.action-btn.has-badge {\r\n    padding-right: 32px;\r\n}\r\n\r\n.badge {\r\n    position: absolute;\r\n    top: -6px;\r\n    right: -6px;\r\n    background-color: var(--apple-error);\r\n    color: white;\r\n    border-radius: 50%;\r\n    min-width: 20px;\r\n    height: 20px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    font-size: 12px;\r\n    font-weight: bold;\r\n}\r\n\r\n.user-section {\r\n    margin-left: auto;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\n\r\n.login-btn {\r\n    color: var(--apple-accent);\r\n    font-weight: 500;\r\n    font-size: 16px;\r\n    padding: var(--spacing-sm) var(--spacing-md);\r\n    border-radius: var(--radius-pill);\r\n    transition: background-color 0.2s ease;\r\n}\r\n\r\n.login-btn:hover {\r\n    background-color: var(--apple-bg-secondary);\r\n}\r\n\r\n.user-profile {\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    padding: var(--spacing-xs);\r\n    border-radius: var(--radius-pill);\r\n    transition: background-color 0.2s ease;\r\n}\r\n\r\n.user-profile:hover {\r\n    background-color: var(--apple-bg-secondary);\r\n}\r\n\r\n.user-name {\r\n    margin-right: var(--spacing-md);\r\n    font-weight: 500;\r\n    color: var(--apple-accent);\r\n}\r\n\r\n.user-avatar {\r\n    width: 36px;\r\n    height: 36px;\r\n    border-radius: 50%;\r\n    box-shadow: var(--shadow-sm);\r\n}\r\n\r\n.user-dropdown {\r\n    min-width: 140px;\r\n    margin-top: var(--spacing-sm);\r\n}\r\n\r\n.dropdown-option {\r\n    padding: var(--spacing-xs) 0;\r\n    width: 100%;\r\n    text-align: center;\r\n    font-weight: 500;\r\n}\r\n\r\n.logout {\r\n    color: var(--apple-error);\r\n}\r\n</style>\r\n"],"mappings":";AAsCA,OAAAA,KAAA;AACA;EACAC,MAAA,GAAAD,KAAA;EACAE,IAAA;EACAC,KAAA;EACAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,WAAA,OAAAC,WAAA;MACAC,QAAA;MACAC,MAAA;MACAC,OAAA;MACAC,mBAAA;IACA;EACA;EACAC,OAAA,WAAAA,QAAA;IAAA,IAAAC,KAAA;IACA;IACA,UAAAC,WAAA,CAAAC,QAAA,CAAAP,QAAA;MACA,KAAAQ,IAAA,CAAAC,WAAA,GAAAC,IAAA,WAAAC,GAAA;QACAC,OAAA,CAAAC,GAAA,wBAAAF,GAAA;QACA,IAAAA,GAAA,CAAAG,WAAA;UACAT,KAAA,CAAAL,QAAA,GAAAW,GAAA,CAAAf,IAAA,CAAAI,QAAA;UACAK,KAAA,CAAAJ,MAAA,GAAAU,GAAA,CAAAf,IAAA,CAAAK,MAAA;UACAU,GAAA,CAAAf,IAAA,CAAAmB,UAAA,GAAAJ,GAAA,CAAAf,IAAA,CAAAmB,UAAA,CAAAC,SAAA;UACAX,KAAA,CAAAC,WAAA,CAAAC,QAAA,GAAAI,GAAA,CAAAf,IAAA;UACAS,KAAA,CAAAH,OAAA;QACA;MACA;IACA;MACA,KAAAF,QAAA,QAAAM,WAAA,CAAAC,QAAA,CAAAP,QAAA;MACA,KAAAC,MAAA,QAAAK,WAAA,CAAAC,QAAA,CAAAN,MAAA;MACA,KAAAC,OAAA;IACA;IACA;IACA;IACA,KAAAe,cAAA;EACA;EACAC,OAAA;IACAC,UAAA,WAAAA,WAAA;MACA,uBAAAC,MAAA,CAAAC,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAF,IAAA;UAAAG,KAAA;YAAA1B,WAAA,OAAAA;UAAA;QAAA;MACA;QACA,KAAAwB,OAAA,CAAAG,OAAA;UAAAJ,IAAA;UAAAG,KAAA;YAAA1B,WAAA,OAAAA;UAAA;QAAA;QACA,KAAAwB,OAAA,CAAAI,EAAA;MACA;IACA;IACAC,IAAA,WAAAA,KAAA;MACA,mBAAAP,MAAA,CAAAC,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAF,IAAA;QAAA;MACA;IACA;IACAO,SAAA,WAAAA,UAAA;MACA,wBAAAR,MAAA,CAAAC,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAF,IAAA;QAAA;MACA;IACA;IACAQ,SAAA,WAAAA,UAAA;MACA,wBAAAT,MAAA,CAAAC,IAAA;QACA,KAAAC,OAAA,CAAAC,IAAA;UAAAF,IAAA;QAAA;MACA;IACA;IACA,6CACAS,QAAA,WAAAA,SAAA;MAAA,IAAAC,MAAA;MACA,KAAAvB,IAAA,CAAAwB,MAAA,GAAAtB,IAAA,WAAAC,GAAA;QACA,IAAAA,GAAA,CAAAG,WAAA;UACAiB,MAAA,CAAAzB,WAAA,CAAAC,QAAA;UACAK,OAAA,CAAAC,GAAA;UACA,iBAAAkB,MAAA,CAAAX,MAAA,CAAAC,IAAA;YACAU,MAAA,CAAAT,OAAA,CAAAI,EAAA;UACA;YACAK,MAAA,CAAAT,OAAA,CAAAC,IAAA;cAAAF,IAAA;YAAA;UACA;QACA;UACAU,MAAA,CAAAE,QAAA,CAAAC,KAAA;QACA;MACA;IACA;IACA;IACAjB,cAAA,WAAAA,eAAA;MACA;MACA;MACA,KAAAd,mBAAA,GAAAgC,IAAA,CAAAC,KAAA,CAAAD,IAAA,CAAAE,MAAA;IACA;EACA;AACA","ignoreList":[]}]}