{"remainingRequest":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/-Second-hand-mall/src/components/common/AppHeader.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/macos/Desktop/-Second-hand-mall/src/components/common/AppHeader.vue","mtime":1741743644072},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/babel-loader/lib/index.js","mtime":1741743640250},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js","mtime":1741743643788}],"contextDependencies":[],"result":["\n\n    import Mixin from '@/utils/mixin';\n    export default {\n        mixins: [Mixin],\n        name: 'Header',\n        props: ['searchInput','nicknameValue','avatarValue'],\n        data() {\n            return {\n                logoPath: \"/logo.png\",\n                searchValue: this.searchInput,\n                nickname:'登录',\n                avatar:'https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png',\n                isLogin:false,\n                unreadMessagesCount:3\n            };\n        },\n        created(){\n            // console.log(\"header\");\n            if(! this.$globalData.userInfo.nickname){\n                this.$api.getUserInfo().then(res=>{\n                    console.log('Header getUserInfo:',res);\n                    if(res.status_code===1){\n                        this.nickname=res.data.nickname;\n                        this.avatar=res.data.avatar;\n                        res.data.signInTime=res.data.signInTime.substring(0,10);\n                        this.$globalData.userInfo=res.data;\n                        this.isLogin=true;\n                    }\n                })\n            }else {\n                this.nickname=this.$globalData.userInfo.nickname;\n                this.avatar=this.$globalData.userInfo.avatar;\n                this.isLogin=true;\n            }\n        },\n        methods: {\n            searchIdle() {\n                if ('/search' !== this.$route.path) {\n                    this.$router.push({path: '/search', query: {searchValue: this.searchValue}});\n                } else {\n                    this.$router.replace({path: '/search', query: {searchValue: this.searchValue}});\n                    this.$router.go(0);\n                }\n\n            },\n            toMe() {\n                if ('/me' !== this.$route.path) {\n                    this.$router.push({path: '/me'});\n                }\n            },\n            toMessage(){\n                if ('/message' !== this.$route.path) {\n                    this.$router.push({path: '/message'});\n                }\n            },\n            toRelease(){\n                if ('/release' !== this.$route.path) {\n                    this.$router.push({path: '/release'});\n                }\n            },\n            /*这里的logout 只是用前端来删除掉浏览器中之前登录过的用户信息，并没有发送请求*/\n            loginOut(){\n                this.$api.logout().then(res=>{\n                    if(res.status_code===1){\n                        this.$globalData.userInfo={};\n                        console.log(\"login out\");\n                        if ('/index' === this.$route.path) {\n                            this.$router.go(0);\n                        }else {\n                            this.$router.push({path: '/index'});\n                        }\n                    }else {\n                        this.$message.error('网络或系统异常，退出登录失败！');\n                    }\n                });\n\n            }\n        }\n    };\n",null]}