{"remainingRequest":"D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\Desktop\\-Second-hand-mall\\src\\components\\page\\release.vue?vue&type=style&index=0&id=93bb05d2&scoped=true&lang=css","dependencies":[{"path":"D:\\Desktop\\-Second-hand-mall\\src\\components\\page\\release.vue","mtime":1741159852060},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\css-loader\\index.js","mtime":1741229036453},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1741229036550},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\postcss-loader\\src\\index.js","mtime":1741229036447},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1741229036518},{"path":"D:\\Desktop\\-Second-hand-mall\\node_modules\\vue-loader\\lib\\index.js","mtime":1741229036465}],"contextDependencies":[],"result":["\n.release-idle-container {\n    min-height: 85vh;\n}\n\n.release-idle-container-title {\n    font-size: 18px;\n    padding: 30px 0;\n    font-weight: 600;\n    width: 100%;\n    text-align: center;\n}\n\n.release-idle-container-form {\n    padding: 0 180px;\n}\n\n.release-idle-detiles-text {\n    margin: 20px 0;\n}\n.release-idle-place{\n    margin-bottom: 15px;\n}\n.release-tip{\n    color: #555555;\n    float: left;\n    padding-right: 5px;\n    height: 36px;\n    line-height: 36px;\n    font-size: 14px;\n}\n.release-idle-container-picture{\n    margin: 20px 0;\n\n}\n.release-idle-container-picture-title{\n    margin: 10px 0;\n    color: #555555;\n    font-size: 14px;\n    display: none;\n}\n.picture-list {\n    margin: 20px 0;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.disUoloadSty .el-upload--picture-card{\n    display:none;   /* 上传按钮隐藏 */\n}\n\n",{"version":3,"sources":["release.vue"],"names":[],"mappings":";AAgQA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"release.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\r\n    <div>\r\n        <app-head></app-head>\r\n        <app-body>\r\n            <div class=\"release-idle-container\">\r\n                <div class=\"release-idle-container-title\">发布闲置/帖子</div>\r\n                <div class=\"release-idle-container-form\">\r\n                    <el-input placeholder=\"请输入闲置/帖子标题\" v-model=\"idleItemInfo.idleName\"\r\n                              maxlength=\"30\"\r\n                              show-word-limit>\r\n                    </el-input>\r\n                    <el-input\r\n                            class=\"release-idle-detiles-text\"\r\n                            type=\"textarea\"\r\n                            autosize\r\n                            placeholder=\"请输入闲置/帖子的详细介绍...\"\r\n                            v-model=\"idleItemInfo.idleDetails\"\r\n                            maxlength=\"1000\"\r\n                            show-word-limit>\r\n                    </el-input>\r\n                    <div class=\"release-idle-place\">\r\n                        <div class=\"release-tip\">您的位置</div>\r\n                        <el-cascader\r\n                                :options=\"options\"\r\n                                v-model=\"selectedOptions\"\r\n                                @change=\"handleChange\"\r\n                                :separator=\"' '\"\r\n                                style=\"width: 90%;\"\r\n                        >\r\n                        </el-cascader>\r\n                    </div>\r\n                    <div style=\"display: flex; justify-content: space-between;\">\r\n                        <div>\r\n                            <div class=\"release-tip\">闲置类别</div>\r\n                            <el-select  v-model=\"idleItemInfo.idleLabel\" placeholder=\"请选择类别\">\r\n                                <el-option\r\n                                        v-for=\"item in options2\"\r\n                                        :key=\"item.value\"\r\n                                        :label=\"item.label\"\r\n                                        :value=\"item.value\">\r\n                                </el-option>\r\n                            </el-select>\r\n                        </div>\r\n                        <div v-show=\"idleItemInfo.idleLabel !== 5\" style=\"width: 300px;\">\r\n                            <el-input-number v-model=\"idleItemInfo.idlePrice\" :precision=\"2\" :step=\"10\" :max=\"10000000\">\r\n                                <div slot=\"prepend\">价格</div>\r\n                            </el-input-number>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"picture-list\">\r\n                        <el-image style=\"width: 600px;margin-bottom: 2px;\" fit=\"contain\"\r\n                                  v-for=\"(img,index) in imgList\" :key=\"index\" :src=\"img\"\r\n                                  :preview-src-list=\"imgList\"></el-image>\r\n                    </div>\r\n                    <div class=\"release-idle-container-picture\">\r\n                        <div class=\"release-idle-container-picture-title\">上传闲置照片</div>\r\n                        <el-upload\r\n                                action=\"http://localhost:8080/file/\"\r\n                                :on-preview=\"fileHandlePreview\"\r\n                                :on-remove=\"fileHandleRemove\"\r\n                                :on-success=\"fileHandleSuccess\"\r\n                                :on-change='imgChange'\r\n                                :show-file-list=\"showFileList\"\r\n                                :limit=\"10\"\r\n                                :on-exceed=\"handleExceed\"\r\n                                accept=\"image/*\"\r\n                                drag\r\n                                multiple>\r\n                            <i class=\"el-icon-upload\"></i>\r\n                            <div class=\"el-upload__text\">将图片拖到此处，或<em>点击上传</em></div>\r\n                        </el-upload>\r\n\r\n                        <el-dialog :visible.sync=\"imgDialogVisible\">\r\n                            <img width=\"100%\" :src=\"dialogImageUrl\" alt=\"\">\r\n                        </el-dialog>\r\n                    </div>\r\n                    <div style=\"display: flex;justify-content: center;margin-top: 30px;margin-bottom: 30px;\">\r\n                        <el-button type=\"primary\" plain @click=\"releaseButton\">确认发布</el-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <app-foot></app-foot>\r\n        </app-body>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import AppHead from '../common/AppHeader.vue';\r\n    import AppBody from '../common/AppPageBody.vue'\r\n    import AppFoot from '../common/AppFoot.vue'\r\n    import options from '../common/country-data.js'\r\n    import upload from 'element-ui/packages/upload';\r\n\r\n    export default {\r\n        name: \"release\",\r\n        computed: {\r\n            upload() {\r\n                return upload\r\n            }\r\n        },\r\n        components: {\r\n            AppHead,\r\n            AppBody,\r\n            AppFoot\r\n        },\r\n        data() {\r\n            return {\r\n                imgDialogVisible:false,\r\n                dialogImageUrl:'',\r\n                showFileList:true,\r\n                options:options,\r\n                selectedOptions:[],\r\n\r\n                options2: [{\r\n                    value: 1,\r\n                    label: '数码科技'\r\n                }, {\r\n                    value: 2,\r\n                    label: '生活用品'\r\n                }, {\r\n                    value: 3,\r\n                    label: '运动相关'\r\n                }, {\r\n                    value: 4,\r\n                    label: '图书笔记'\r\n                }, {\r\n                    value: 5,\r\n                    label: '社区帖子'\r\n                }],\r\n                imgList:[],\r\n                idleItemInfo:{\r\n                    idleName:'',\r\n                    idleDetails:'',\r\n                    pictureList:'',\r\n                    idlePrice:0,\r\n                    idlePlace:'',\r\n                    idleLabel:''\r\n                }\r\n            };\r\n        },\r\n        methods: {\r\n            handleChange(value) {\r\n                console.log(value);\r\n                this.idleItemInfo.idlePlace=value[1];\r\n            },\r\n            imgChange(file, fileList){\r\n                this.noneBtnImg = fileList.length >= this.limitCountImg;\r\n            },\r\n            fileHandleRemove(file, fileList) {\r\n                console.log(file, fileList);\r\n                for(let i=0;i<this.imgList.length;i++){\r\n                    if(this.imgList[i]===file.response.data){\r\n                        this.imgList.splice(i,1);\r\n                    }\r\n                }\r\n            },\r\n            fileHandlePreview(file) {\r\n                console.log(file);\r\n                this.dialogImageUrl=file.response.data;\r\n                this.imgDialogVisible=true;\r\n            },\r\n            fileHandleSuccess(response, file, fileList){\r\n                console.log(\"file:\",response,file,fileList);\r\n                this.imgList.push(response.data);\r\n            },\r\n            releaseButton(){\r\n                this.idleItemInfo.pictureList=JSON.stringify(this.imgList);\r\n                console.log(this.idleItemInfo);\r\n                if(this.idleItemInfo.idleName&&\r\n                    this.idleItemInfo.idleDetails&&\r\n                    this.idleItemInfo.idlePlace&&\r\n                    this.idleItemInfo.idleLabel&&\r\n                  (this.idleItemInfo.idlePrice || this.idleItemInfo.idleLabel === 5)){\r\n                    this.$api.addIdleItem(this.idleItemInfo).then(res=>{\r\n                        if (res.status_code === 1) {\r\n                            this.$message({\r\n                                message: '发布成功！',\r\n                                type: 'success'\r\n                            });\r\n                            console.log(res.data);\r\n                            this.$router.replace({path: '/details', query: {id: res.data.id}});\r\n                        } else {\r\n                            this.$message.error('发布失败！'+res.msg);\r\n                        }\r\n                    }).catch(e=>{\r\n                        this.$message.error('请填写完整信息');\r\n                    })\r\n                }else {\r\n                    this.$message.error('请填写完整信息！');\r\n                }\r\n\r\n            },\r\n            handleExceed(files, fileList) {\r\n                this.$message.warning(`限制10张图片，本次选择了 ${files.length} 张图，共选择了 ${files.length + fileList.length} 张图`);\r\n            },\r\n            isNotice() {\r\n\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n    .release-idle-container {\r\n        min-height: 85vh;\r\n    }\r\n\r\n    .release-idle-container-title {\r\n        font-size: 18px;\r\n        padding: 30px 0;\r\n        font-weight: 600;\r\n        width: 100%;\r\n        text-align: center;\r\n    }\r\n\r\n    .release-idle-container-form {\r\n        padding: 0 180px;\r\n    }\r\n\r\n    .release-idle-detiles-text {\r\n        margin: 20px 0;\r\n    }\r\n    .release-idle-place{\r\n        margin-bottom: 15px;\r\n    }\r\n    .release-tip{\r\n        color: #555555;\r\n        float: left;\r\n        padding-right: 5px;\r\n        height: 36px;\r\n        line-height: 36px;\r\n        font-size: 14px;\r\n    }\r\n    .release-idle-container-picture{\r\n        margin: 20px 0;\r\n\r\n    }\r\n    .release-idle-container-picture-title{\r\n        margin: 10px 0;\r\n        color: #555555;\r\n        font-size: 14px;\r\n        display: none;\r\n    }\r\n    .picture-list {\r\n        margin: 20px 0;\r\n        display: flex;\r\n        flex-direction: column;\r\n        align-items: center;\r\n    }\r\n\r\n    .disUoloadSty .el-upload--picture-card{\r\n        display:none;   /* 上传按钮隐藏 */\r\n    }\r\n\r\n</style>\r\n"]}]}