{"remainingRequest":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/macos/Desktop/-Second-hand-mall/src/components/page/my-reports.vue?vue&type=style&index=0&id=47f6a93e&scoped=true&lang=css","dependencies":[{"path":"/Users/macos/Desktop/-Second-hand-mall/src/components/page/my-reports.vue","mtime":1742022873561},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/css-loader/index.js","mtime":1741743640772},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1741743643789},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/postcss-loader/src/index.js","mtime":1741743642507},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/cache-loader/dist/cjs.js","mtime":1741743640345},{"path":"/Users/macos/Desktop/-Second-hand-mall/node_modules/vue-loader/lib/index.js","mtime":1741743643788}],"contextDependencies":[],"result":["\n.my-reports-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.page-title {\n  margin-bottom: 20px;\n}\n\n.page-title h2 {\n  font-size: 24px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.empty-data {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 50px 0;\n  color: #909399;\n}\n\n.empty-data i {\n  font-size: 48px;\n  margin-bottom: 20px;\n}\n\n.report-card {\n  margin-bottom: 20px;\n}\n\n.report-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.report-id {\n  color: #606266;\n  font-size: 14px;\n}\n\n.report-content {\n  margin-bottom: 15px;\n}\n\n.report-item {\n  margin-bottom: 10px;\n  line-height: 22px;\n}\n\n.label {\n  display: inline-block;\n  width: 100px;\n  color: #606266;\n  font-weight: bold;\n}\n\n.report-footer {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 15px;\n  padding-top: 10px;\n  border-top: 1px solid #ebeef5;\n}\n\n.pagination {\n  margin-top: 20px;\n  text-align: center;\n}\n\n.detail-item {\n  margin-bottom: 15px;\n  line-height: 24px;\n}\n\n.detail-label {\n  display: inline-block;\n  width: 100px;\n  text-align: right;\n  margin-right: 10px;\n  font-weight: bold;\n  color: #606266;\n}\n",{"version":3,"sources":["my-reports.vue"],"names":[],"mappings":";AAoSA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"my-reports.vue","sourceRoot":"src/components/page","sourcesContent":["<template>\n  <div>\n    <app-header></app-header>\n    <app-page-body>\n      <div class=\"my-reports-container\">\n        <div class=\"page-title\">\n          <h2>我的举报</h2>\n        </div>\n        \n        <el-tabs v-model=\"activeTab\" @tab-click=\"handleTabClick\">\n          <el-tab-pane label=\"全部\" name=\"all\"></el-tab-pane>\n          <el-tab-pane label=\"待处理\" name=\"pending\"></el-tab-pane>\n          <el-tab-pane label=\"已通过\" name=\"approved\"></el-tab-pane>\n          <el-tab-pane label=\"已拒绝\" name=\"rejected\"></el-tab-pane>\n        </el-tabs>\n        \n        <div class=\"reports-list\" v-loading=\"loading\">\n          <div v-if=\"reportsList.length === 0\" class=\"empty-data\">\n            <i class=\"el-icon-document\"></i>\n            <p>暂无举报记录</p>\n          </div>\n          \n          <el-card v-for=\"item in reportsList\" :key=\"item.id\" class=\"report-card\">\n            <div class=\"report-header\">\n              <span class=\"report-id\">举报编号：{{ item.id }}</span>\n              <el-tag :type=\"getStatusType(item.status)\" size=\"medium\">\n                {{ getStatusText(item.status) }}\n              </el-tag>\n            </div>\n            \n            <div class=\"report-content\">\n              <div class=\"report-item\">\n                <span class=\"label\">被举报商品：</span>\n                <el-link type=\"primary\" @click=\"viewItem(item.reportedItemId)\">\n                  {{ item.reportedItemName }}\n                </el-link>\n              </div>\n              \n              <div class=\"report-item\">\n                <span class=\"label\">被举报用户：</span>\n                <span>{{ item.reportedUserName }}</span>\n              </div>\n              \n              <div class=\"report-item\">\n                <span class=\"label\">举报原因：</span>\n                <span>{{ item.reportReason }}</span>\n              </div>\n              \n              <div class=\"report-item\">\n                <span class=\"label\">举报时间：</span>\n                <span>{{ item.createTime }}</span>\n              </div>\n              \n              <div class=\"report-item\" v-if=\"item.status !== 0\">\n                <span class=\"label\">处理结果：</span>\n                <span>{{ item.handleReason || '无' }}</span>\n              </div>\n              \n              <div class=\"report-item\" v-if=\"item.status !== 0\">\n                <span class=\"label\">处理时间：</span>\n                <span>{{ item.handleTime || '无' }}</span>\n              </div>\n            </div>\n            \n            <div class=\"report-footer\">\n              <el-button \n                size=\"small\" \n                type=\"danger\" \n                plain \n                v-if=\"item.status === 0\"\n                @click=\"cancelReport(item.id)\"\n              >\n                取消举报\n              </el-button>\n              <el-button \n                size=\"small\" \n                type=\"primary\" \n                @click=\"viewDetail(item)\"\n              >\n                查看详情\n              </el-button>\n            </div>\n          </el-card>\n          \n          <div class=\"pagination\" v-if=\"reportsList.length > 0\">\n            <el-pagination\n              @current-change=\"handleCurrentChange\"\n              :current-page.sync=\"currentPage\"\n              :page-size=\"pageSize\"\n              layout=\"prev, pager, next, jumper\"\n              :total=\"total\">\n            </el-pagination>\n          </div>\n        </div>\n      </div>\n    </app-page-body>\n    \n    <!-- 举报详情对话框 -->\n    <el-dialog\n      title=\"举报详情\"\n      :visible.sync=\"detailDialogVisible\"\n      width=\"50%\"\n    >\n      <div v-if=\"currentReport\">\n        <div class=\"detail-item\">\n          <span class=\"detail-label\">举报ID：</span>\n          <span>{{ currentReport.id }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"detail-label\">被举报商品：</span>\n          <el-link type=\"primary\" @click=\"viewItem(currentReport.reportedItemId)\">\n            {{ currentReport.reportedItemName }}\n          </el-link>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"detail-label\">被举报用户：</span>\n          <span>{{ currentReport.reportedUserName }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"detail-label\">举报原因：</span>\n          <span>{{ currentReport.reportReason }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"detail-label\">举报时间：</span>\n          <span>{{ currentReport.createTime }}</span>\n        </div>\n        <div class=\"detail-item\">\n          <span class=\"detail-label\">状态：</span>\n          <el-tag :type=\"getStatusType(currentReport.status)\">\n            {{ getStatusText(currentReport.status) }}\n          </el-tag>\n        </div>\n        <div class=\"detail-item\" v-if=\"currentReport.status !== 0\">\n          <span class=\"detail-label\">处理结果：</span>\n          <span>{{ currentReport.handleReason || '无' }}</span>\n        </div>\n        <div class=\"detail-item\" v-if=\"currentReport.status !== 0\">\n          <span class=\"detail-label\">处理时间：</span>\n          <span>{{ currentReport.handleTime || '无' }}</span>\n        </div>\n      </div>\n      <span slot=\"footer\" class=\"dialog-footer\">\n        <el-button @click=\"detailDialogVisible = false\">关闭</el-button>\n        <el-button \n          v-if=\"currentReport && currentReport.status === 0\" \n          type=\"danger\" \n          @click=\"cancelReport(currentReport.id)\"\n        >取消举报</el-button>\n      </span>\n    </el-dialog>\n    \n    <app-foot></app-foot>\n  </div>\n</template>\n\n<script>\nimport AppHeader from '../common/AppHeader.vue'\nimport AppPageBody from '../common/AppPageBody.vue'\nimport AppFoot from '../common/AppFoot.vue'\n\nexport default {\n  name: 'my-reports',\n  components: {\n    AppHeader,\n    AppPageBody,\n    AppFoot\n  },\n  data() {\n    return {\n      activeTab: 'all',\n      loading: false,\n      reportsList: [],\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      detailDialogVisible: false,\n      currentReport: null\n    }\n  },\n  created() {\n    this.fetchReports()\n  },\n  methods: {\n    fetchReports() {\n      if (!this.$sta.isLogin) {\n        this.$message.warning('请先登录')\n        this.$router.push('/login')\n        return\n      }\n      \n      this.loading = true\n      \n      this.$api.getMyReports()\n        .then(res => {\n          if (res.status_code === 1) {\n            this.reportsList = res.data.list || []\n            this.total = res.data.total || 0\n            \n            // 根据标签筛选\n            if (this.activeTab !== 'all') {\n              this.filterReportsByTab()\n            }\n          } else {\n            this.$message.error(res.msg || '获取举报列表失败')\n          }\n        })\n        .catch(err => {\n          console.error(err)\n          this.$message.error('获取举报列表失败')\n        })\n        .finally(() => {\n          this.loading = false\n        })\n    },\n    handleTabClick() {\n      this.currentPage = 1\n      if (this.activeTab === 'all') {\n        this.fetchReports()\n      } else {\n        this.filterReportsByTab()\n      }\n    },\n    filterReportsByTab() {\n      const statusMap = {\n        'pending': 0,\n        'approved': 1,\n        'rejected': 2\n      }\n      \n      if (this.activeTab !== 'all') {\n        const status = statusMap[this.activeTab]\n        this.reportsList = this.reportsList.filter(item => item.status === status)\n      }\n    },\n    handleCurrentChange(val) {\n      this.currentPage = val\n      this.fetchReports()\n    },\n    getStatusType(status) {\n      const types = {\n        0: 'warning',\n        1: 'success',\n        2: 'danger'\n      }\n      return types[status] || 'info'\n    },\n    getStatusText(status) {\n      const texts = {\n        0: '待处理',\n        1: '已通过',\n        2: '已拒绝'\n      }\n      return texts[status] || '未知'\n    },\n    viewDetail(report) {\n      this.currentReport = report\n      this.detailDialogVisible = true\n    },\n    viewItem(itemId) {\n      if (itemId) {\n        this.$router.push(`/details?id=${itemId}`)\n      }\n    },\n    cancelReport(reportId) {\n      this.$confirm('确定要取消此举报吗?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        this.$api.cancelReport({ reportId })\n          .then(res => {\n            if (res.status_code === 1) {\n              this.$message.success('取消举报成功')\n              this.detailDialogVisible = false\n              this.fetchReports()\n            } else {\n              this.$message.error(res.msg || '取消举报失败')\n            }\n          })\n          .catch(err => {\n            console.error(err)\n            this.$message.error('取消举报失败')\n          })\n      }).catch(() => {\n        // 取消操作\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n.my-reports-container {\n  max-width: 1200px;\n  margin: 0 auto;\n  padding: 20px;\n}\n\n.page-title {\n  margin-bottom: 20px;\n}\n\n.page-title h2 {\n  font-size: 24px;\n  font-weight: 500;\n  color: #303133;\n}\n\n.empty-data {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  padding: 50px 0;\n  color: #909399;\n}\n\n.empty-data i {\n  font-size: 48px;\n  margin-bottom: 20px;\n}\n\n.report-card {\n  margin-bottom: 20px;\n}\n\n.report-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 15px;\n  padding-bottom: 10px;\n  border-bottom: 1px solid #ebeef5;\n}\n\n.report-id {\n  color: #606266;\n  font-size: 14px;\n}\n\n.report-content {\n  margin-bottom: 15px;\n}\n\n.report-item {\n  margin-bottom: 10px;\n  line-height: 22px;\n}\n\n.label {\n  display: inline-block;\n  width: 100px;\n  color: #606266;\n  font-weight: bold;\n}\n\n.report-footer {\n  display: flex;\n  justify-content: flex-end;\n  margin-top: 15px;\n  padding-top: 10px;\n  border-top: 1px solid #ebeef5;\n}\n\n.pagination {\n  margin-top: 20px;\n  text-align: center;\n}\n\n.detail-item {\n  margin-bottom: 15px;\n  line-height: 24px;\n}\n\n.detail-label {\n  display: inline-block;\n  width: 100px;\n  text-align: right;\n  margin-right: 10px;\n  font-weight: bold;\n  color: #606266;\n}\n</style> "]}]}