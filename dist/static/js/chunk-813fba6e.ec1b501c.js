(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-813fba6e"],{"0013":function(t,e,a){"use strict";a("4d47")},"2b4c3":function(t,e,a){"use strict";a("9a0d")},"2fb8":function(t,e,a){"use strict";a("df56")},"31d4":function(t,e,a){},"3e51":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-wrapper"},[e("app-head"),e("app-body",[e("div",{staticClass:"home-container"},[e("div",{staticClass:"home-header"},[e("h1",{staticClass:"main-title"},[t._v("校易购")]),e("p",{staticClass:"sub-title"},[t._v("发现校园里的闲置宝藏")])]),e("el-tabs",{staticClass:"category-tabs",on:{"tab-click":t.handleClick},model:{value:t.labelName,callback:function(e){t.labelName=e},expression:"labelName"}},[e("el-tab-pane",{attrs:{label:"全部",name:"0"}}),e("el-tab-pane",{attrs:{label:"数码科技",name:"1"}}),e("el-tab-pane",{attrs:{label:"生活用品",name:"2"}}),e("el-tab-pane",{attrs:{label:"运动相关",name:"3"}}),e("el-tab-pane",{attrs:{label:"图书笔记",name:"4"}}),e("el-tab-pane",{attrs:{label:"社区帖子",name:"5"}})],1),e("div",{staticClass:"product-grid"},t._l(t.idleList,(function(a,s){return e("el-card",{key:s,staticClass:"product-card",attrs:{shadow:"hover"},nativeOn:{click:function(e){return t.toDetails(a)}}},[e("div",{staticClass:"product-image"},[e("el-image",{attrs:{src:a.imgUrl,fit:"cover"}},[e("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e("i",{staticClass:"el-icon-picture-outline"},[t._v("无图")])])]),2===a.idleStatus?e("div",{staticClass:"product-tag sold"},[t._v("已售出")]):e("div",{staticClass:"product-tag"},[t._v("出售中")])],1),e("div",{staticClass:"product-info"},[e("h3",{staticClass:"product-title"},[t._v(t._s(a.idleName))]),e("div",{staticClass:"product-meta"},[0!==a.idlePrice?e("div",{staticClass:"product-price"},[t._v("¥"+t._s(a.idlePrice))]):e("div",{staticClass:"product-price"},[t._v("免费")]),e("div",{staticClass:"product-location"},[t._v(t._s(a.idlePlace))])]),e("div",{staticClass:"product-time"},[t._v(t._s(a.timeStr))]),e("div",{staticClass:"product-user"},[e("el-avatar",{attrs:{size:24,src:a.user.avatar}}),e("span",{staticClass:"user-name"},[t._v(t._s(a.user.nickname))])],1)])])})),1),e("div",{staticClass:"pagination-container"},[e("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-size":8,layout:"prev, pager, next, jumper",total:t.totalItem},on:{"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e}}})],1)],1),e("app-foot")],1)],1)},i=[],n=(a("a481"),a("6e70")),r=a("4fc4"),o=a("85a9"),l=function(){var t=this,e=t._self._c;return e("div",{staticClass:"carousel"},[e("div",{staticClass:"carousel-container"},[e("el-carousel",{attrs:{direction:"vertical",autoplay:!0}},t._l(t.urlList,(function(t){return e("el-carousel-item",{key:t.url},[e("h3",{staticClass:"medium"},[e("img",{attrs:{src:t.url,alt:""}})])])})),1)],1)])},c=[],u={name:"AppCarousel",data:function(){return{urlList:[{url:"http://5b0988e595225.cdn.sohucs.com/images/20181023/bff9680896c44ccea379162c9eec1483.jpeg"},{url:"https://c01.gaitubao.net/FqEn34L2gM8GooPFyG1JaK8dBnho.jpg"},{url:"https://pics7.baidu.com/feed/9345d688d43f8794fe8261f36713abfe1ad53a84.jpeg"}]}}},d=u,p=(a("6140"),a("2877")),h=Object(p["a"])(d,l,c,!1,null,"358233c9",null),f=h.exports,g={name:"index",components:{AppCarousel:f,AppHead:n["a"],AppBody:r["a"],AppFoot:o["a"]},data:function(){return{labelName:"0",idleList:[],currentPage:1,totalItem:1}},created:function(){this.findIdleTiem(1)},mounted:function(){},watch:{$route:function(t,e){this.labelName=t.query.labelName;var a=parseInt(t.query.page)?parseInt(t.query.page):1;this.currentPage=parseInt(t.query.page)?parseInt(t.query.page):1,this.findIdleTiem(a)}},methods:{findIdleTiem:function(t){var e=this,a=this.$loading({lock:!0,text:"加载数据中",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0)"});this.labelName>0?this.$api.findIdleTiemByLable({idleLabel:this.labelName,page:t,nums:8}).then((function(t){console.log(t);for(var a=t.data.list,s=0;s<a.length;s++){a[s].timeStr=a[s].releaseTime.substring(0,10)+" "+a[s].releaseTime.substring(11,19);var i=JSON.parse(a[s].pictureList);a[s].imgUrl=i.length>0?i[0]:""}e.idleList=a,e.totalItem=t.data.count,console.log(e.totalItem)})).catch((function(t){console.log(t)})).finally((function(){a.close()})):this.$api.findIdleTiem({page:t,nums:8}).then((function(t){console.log(t);for(var a=t.data.list,s=0;s<a.length;s++){a[s].timeStr=a[s].releaseTime.substring(0,10)+" "+a[s].releaseTime.substring(11,19);var i=JSON.parse(a[s].pictureList);a[s].imgUrl=i.length>0?i[0]:""}e.idleList=a,e.totalItem=t.data.count,console.log(e.totalItem)})).catch((function(t){console.log(t)})).finally((function(){a.close()}))},handleClick:function(t,e){console.log(this.labelName),this.$router.replace({query:{page:1,labelName:this.labelName}})},handleCurrentChange:function(t){console.log("当前页: ".concat(t)),this.$router.replace({query:{page:t,labelName:this.labelName}})},toDetails:function(t){this.$router.push({path:"/details",query:{id:t.id}})}}},m=g,v=(a("2b4c3"),Object(p["a"])(m,s,i,!1,null,"7bca3402",null));e["default"]=v.exports},"4d47":function(t,e,a){},"4fc4":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"page-body"},[e("div",{staticClass:"page-content"},[t._t("default")],2)])},i=[],n={name:"AppPageBody"},r=n,o=(a("0013"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"4f6f044f",null);e["a"]=l.exports},6140:function(t,e,a){"use strict";a("31d4")},"6e70":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"header"},[e("div",{staticClass:"header-container"},[e("div",{staticClass:"app-name"},[e("router-link",{attrs:{to:"/"}},[e("img",{staticClass:"logo-image",attrs:{src:t.logoPath}}),e("span",{staticClass:"logo-text"},[t._v("校易购")])])],1),e("div",{staticClass:"search-container"},[e("el-input",{staticClass:"search-input",attrs:{placeholder:"搜闲置...","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchIdle.apply(null,arguments)}},model:{value:t.searchValue,callback:function(e){t.searchValue=e},expression:"searchValue"}},[e("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchIdle},slot:"append"})],1)],1),e("div",{staticClass:"action-buttons"},[e("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.toRelease}},[t._v("发布闲置/公告")]),e("el-button",{attrs:{type:"primary",icon:"el-icon-chat-dot-round"},on:{click:t.toMessage}},[t._v("\n                消息\n                "),t.unreadMessagesCount>0?e("el-badge",{staticClass:"message-badge",attrs:{value:t.unreadMessagesCount}}):t._e()],1),t.isLogin?e("el-dropdown",{attrs:{trigger:"click"}},[e("div",{staticClass:"user-profile"},[e("div",{staticClass:"user-nickname"},[t._v(t._s(t.nickname))]),e("el-avatar",{attrs:{src:t.avatar,size:32}})],1),e("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e("el-dropdown-item",[e("div",{on:{click:t.toMe}},[t._v("个人中心")])]),e("el-dropdown-item",{staticClass:"logout-item",attrs:{divided:""}},[e("div",{on:{click:t.loginOut}},[t._v("退出登录")])])],1)],1):e("router-link",{staticClass:"user-name-text",attrs:{to:"/login"}},[t._v("登录")])],1)])])},i=[],n=(a("a481"),{width:"1",height:"1"}),r=1920,o=1080,l=parseFloat((r/o).toFixed(5)),c={data:function(){return{drawTiming:null}},mounted:function(){this.calcRate(),window.addEventListener("resize",this.resize)},beforeDestroy:function(){window.removeEventListener("resize",this.resize)},methods:{calcRate:function(){var t=this.$refs["zoom"];if(t){var e=parseFloat((window.innerWidth/window.innerHeight).toFixed(5));t&&(e>l?(n.width=(window.innerHeight*l/r).toFixed(5),n.height=(window.innerHeight/o).toFixed(5),t.style.transform="scale(".concat(n.width,", ").concat(n.height,") translate(-50%, -50%)")):(n.height=(window.innerWidth/l/o).toFixed(5),n.width=(window.innerWidth/r).toFixed(5),t.style.transform="scale(".concat(n.width,", ").concat(n.height,") translate(-50%, -50%)")))}},resize:function(){var t=this;clearTimeout(this.drawTiming),this.drawTiming=setTimeout((function(){t.calcRate()}),200)}}},u={mixins:[c],name:"Header",props:["searchInput","nicknameValue","avatarValue"],data:function(){return{logoPath:"/logo.png",searchValue:this.searchInput,nickname:"登录",avatar:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png",isLogin:!1,unreadMessagesCount:3}},created:function(){var t=this;this.$globalData.userInfo.nickname?(this.nickname=this.$globalData.userInfo.nickname,this.avatar=this.$globalData.userInfo.avatar,this.isLogin=!0):this.$api.getUserInfo().then((function(e){console.log("Header getUserInfo:",e),1===e.status_code&&(t.nickname=e.data.nickname,t.avatar=e.data.avatar,e.data.signInTime=e.data.signInTime.substring(0,10),t.$globalData.userInfo=e.data,t.isLogin=!0)}))},methods:{searchIdle:function(){"/search"!==this.$route.path?this.$router.push({path:"/search",query:{searchValue:this.searchValue}}):(this.$router.replace({path:"/search",query:{searchValue:this.searchValue}}),this.$router.go(0))},toMe:function(){"/me"!==this.$route.path&&this.$router.push({path:"/me"})},toMessage:function(){"/message"!==this.$route.path&&this.$router.push({path:"/message"})},toRelease:function(){"/release"!==this.$route.path&&this.$router.push({path:"/release"})},loginOut:function(){var t=this;this.$api.logout().then((function(e){1===e.status_code?(t.$globalData.userInfo={},console.log("login out"),"/index"===t.$route.path?t.$router.go(0):t.$router.push({path:"/index"})):t.$message.error("网络或系统异常，退出登录失败！")}))}}},d=u,p=(a("efb4"),a("2877")),h=Object(p["a"])(d,s,i,!1,null,"6eb184ee",null);e["a"]=h.exports},"85a9":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"footer-content"},[t._m(0),e("div",{staticClass:"footer-copyright"},[e("p",[t._v("© "+t._s(t.currentYear)+" 校易购 - 毕业设计项目")])])])])},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"footer-main"},[e("div",{staticClass:"footer-section"},[e("h3",{staticClass:"footer-title"},[t._v("校易购")]),e("p",{staticClass:"footer-desc"},[t._v("校园闲置物品交易平台 - 让闲置焕发新生")])]),e("div",{staticClass:"footer-section"},[e("h3",{staticClass:"footer-title"},[t._v("联系我们")]),e("p",{staticClass:"footer-contact"},[e("i",{staticClass:"el-icon-message"}),t._v(" contact@schoolbuy.com")]),e("p",{staticClass:"footer-contact"},[e("i",{staticClass:"el-icon-phone"}),t._v(" 010-12345678")])])])}],n={name:"AppFoot",computed:{currentYear:function(){return(new Date).getFullYear()}}},r=n,o=(a("2fb8"),a("2877")),l=Object(o["a"])(r,s,i,!1,null,"3a7c975e",null);e["a"]=l.exports},"9a0d":function(t,e,a){},c174:function(t,e,a){},df56:function(t,e,a){},efb4:function(t,e,a){"use strict";a("c174")}}]);